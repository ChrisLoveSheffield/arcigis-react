"use strict";(self.webpackChunkuums_front_end=self.webpackChunkuums_front_end||[]).push([[6052],{57682:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var r=i(1413),n=i(74165),a=i(15861),s=i(15671),h=i(43144),o=i(60136),u=i(29388),c=i(27366),d=i(32718),l=i(66978),p=i(94172),f=i(49861),v=(i(63780),i(93169),i(25243),i(69912)),g=i(78983),y=i(90110),m=i(95986),w=i(77318),Z=i(83978),k=i(9229),C=i(67581),_=i(76289),b=i(13107),x=i(45008),I=d.Z.getLogger("esri.views.2d.layers.MapImageLayerView2D"),U=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,s.Z)(this,i),(e=t.apply(this,arguments))._highlightGraphics=new g.J,e}return(0,h.Z)(i,[{key:"update",value:function(e){this.strategy.update(e).catch((function(e){(0,l.D_)(e)||I.error(e)}))}},{key:"attach",value:function(){var e=this,t=this.layer,i=t.imageMaxWidth,r=t.imageMaxHeight,n=t.version,a=n>=10.3,s=n>=10;this._bitmapContainer=new y.c,this.container.addChild(this._bitmapContainer);var h=new w.Z({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new Z.Z(this.view.featuresTilingScheme)});this.container.addChild(h.container),this.strategy=new k.Z({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:i,imageMaxHeight:r,imageRotationSupported:a,imageNormalizationSupported:s,hidpi:!0}),this.handles.add((0,p.YP)((function(){return e.exportImageVersion}),(function(){return e.requestUpdate()})),"exportImageVersion"),this.handles.add((0,p.YP)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.floors}),(function(){return e.requestUpdate()})),"view.floors"),this.requestUpdate()}},{key:"detach",value:function(){this.handles.remove("exportImageVersion"),this.handles.remove("view.floors"),this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"highlight",value:function(e,t){var i=this;return this._highlightGraphics.add(e),{remove:function(){i._highlightGraphics.remove(e)}}}},{key:"supportsSpatialReference",value:function(e){return this.layer.serviceSupportsSpatialReference(e)}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return(0,x.K)(e,t,this.view)}},{key:"doRefresh",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(e,t,i,n){return this.layer.fetchImage(e,t,i,(0,r.Z)({timeExtent:this.timeExtent,floors:this.view.floors},n))}}]),i}((0,_.Z)((0,b.Z)((0,m.y)(C.Z))));(0,c._)([(0,f.Cb)()],U.prototype,"strategy",void 0),(0,c._)([(0,f.Cb)()],U.prototype,"updating",void 0);var q=U=(0,c._)([(0,v.j)("esri.views.2d.layers.MapImageLayerView2D")],U)},83978:function(e,t,i){i.d(t,{Z:function(){return v}});var r=i(15671),n=i(43144),a=i(11752),s=i(61120),h=i(60136),o=i(29388),u=i(27366),c=(i(32718),i(25243),i(63780),i(93169),i(75366),i(69912)),d=i(80613),l=i(82022),p=i(8548),f=function(e){(0,h.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"doRender",value:function(e){e.drawPhase===d.jx.HIGHLIGHT&&(0,a.Z)((0,s.Z)(i.prototype),"doRender",this).call(this,e)}},{key:"renderChildren",value:function(e){if(this.attributeView.bindTextures(e.context),this.children.some((function(e){return e.hasData}))){(0,a.Z)((0,s.Z)(i.prototype),"renderChildren",this).call(this,e);var t=e.painter.effects.highlight;t.bind(e),e.context.setColorMask(!0,!0,!0,!0),e.context.clear(p.lk.COLOR_BUFFER_BIT),this._renderChildren(e,t.defines.concat(["highlightAll"])),t.draw(e),t.unbind()}}}]),i}(l.Z),v=f=(0,u._)([(0,c.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],f)}}]);
//# sourceMappingURL=6052.b946520f.chunk.js.map