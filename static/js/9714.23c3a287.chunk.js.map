{"version":3,"file":"static/js/9714.23c3a287.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/VoxelLayerView3D.js","../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.handles.add(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Error.js\";import t from\"../../../core/Handles.js\";import r from\"../../../core/Logger.js\";import{isSome as i,destroyMaybe as a,isNone as o}from\"../../../core/maybe.js\";import{watch as l,initial as n}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{LayerView3D as c}from\"./LayerView3D.js\";import u from\"../../layers/LayerView.js\";import{ContextType as p}from\"../../webgl/context-util.js\";var y;!function(e){e[e.API=1]=\"API\",e[e.VerboseAPI=2]=\"VerboseAPI\",e[e.Error=3]=\"Error\"}(y||(y={}));const g=r.getLogger(\" esri.views.3d.layers.VoxelLayerView3D\");let V=class extends(c(u)){constructor(){super(...arguments),this._usedMemory=0,this._futureMemory=0,this.type=\"voxel-3d\",this._wasmLayerId=-1,this._handles=new t,this._dbgFlags=new Set}get wasmLayerId(){return this._wasmLayerId}initialize(){if(\"local\"!==this.view.viewingMode)throw new s(\"voxel:unsupported-viewingMode\",\"Voxel layers support local viewingMode only.\",{});if(this.view._stage.renderView.renderingContext.type!==p.WEBGL2)throw new s(\"voxel:unsupported-context\",\"Voxel layers are supported in WebGL2 rendering contexts only.\",{});if(!!!this.view._stage.renderView.renderingContext.capabilities.colorBufferFloat?.textureFloat)throw new s(\"voxel:missing-color-buffer-float\",\"Voxel layers require the WebGL2 extension EXT_color_buffer_float\",{});const e=this.layer.spatialReference;if(!m(e,this.view.spatialReference))throw new s(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this scene layer is incompatible with the spatial reference of the view\",{});const t=this.layer.currentVariableId,r=this.layer.getVolume(t),a=this.layer.getVariable(t);if(i(r)&&i(a)){const e=r.dimensions[0],s=r.dimensions[1],t=r.getZDimension();if(t>1){const i=r.dimensions[t],o=e.size*s.size*i.size;let l=1;switch(a.renderingFormat.type){case\"Int16\":case\"UInt16\":l=2;break;case\"Int32\":case\"UInt32\":case\"Float32\":l=4}this._futureMemory=l*o}}const o=this.view.addVoxelLayerViewToWasm(this).then((e=>{this._wasmLayerId=e,this._suspendedHandle=l((()=>this.suspended),(e=>{const s=this.view.voxelWasm;i(s)&&s.setEnabled(this,!e)}),n),this._handles.add([l((()=>this.layer.renderMode),(e=>this._pushRenderModeToWasm(e))),l((()=>this.layer.currentVariableId),(e=>this._pushCurrentVariableIdToWasm(e))),l((()=>this.layer.getDynamicSections()),(e=>this._pushDynamicSectionsToWasm(e))),l((()=>this.layer.getSlices()),(e=>this._pushSlicesToWasm(e))),l((()=>this.layer.getSections()),(e=>this._pushSectionsToWasm(e))),l((()=>this.layer.getVerticalExaggeration()),(e=>this._pushVerticalExaggerationToWasm(e))),l((()=>this.layer.getVerticalOffset()),(e=>this._pushVerticalOffsetToWasm(e)))])})).catch((e=>{if(this.view.removeVoxelLayerViewFromWasm(this),this._wasmLayerId=-1,-1===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer description was invalid.\",{});if(-2===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer web assembly module failed to download.\",{})}));this.addResolvingPromise(o)}destroy(){this.view.removeVoxelLayerViewFromWasm(this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null),this._handles=a(this._handles)}isUpdating(){const e=this.view.voxelWasm;return!(this._wasmLayerId<0||!i(e))&&e.isUpdating(this._wasmLayerId)}updatingFlagChanged(){this.notifyChange(\"updating\")}getUsedMemory(){return this._usedMemory}getUnloadedMemory(){return this._futureMemory}ignoresMemoryFactor(){return!0}get performanceInfo(){return{nodes:0,displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null}}setUsedMemory(e){this._usedMemory=e,this._futureMemory=0}captureFrustum(){const e=this.view.voxelWasm;i(e)&&e.captureFrustum()}toggleFullVolumeExtentDraw(){const e=this.view.voxelWasm;i(e)&&e.toggleFullVolumeExtentDraw(this)}_pushRenderModeToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushRenderModeToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setRenderMode(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushRenderModeToWasm() failed!\")}_pushSlicesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushSlicesToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setSlices(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushSlicesToWasm() failed!\")}_pushSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushSectionsToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setStaticSections(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushSectionsToWasm() failed!\")}_pushDynamicSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushDynamicSectionsToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setDynamicSections(this,e)||this._dbg(y.Error,\"VoxelLayer._updateDynamicSections() failed!\")}_pushCurrentVariableIdToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() called!, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setCurrentVariable(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() failed!\")}_pushVerticalExaggerationToWasm(e){const s=this.layer.getVolumeStyle(null),t=this.view.voxelWasm;if(this._dbg(y.VerboseAPI,`VoxelLayerView3D._pushVerticalExaggerationToWasm() called, ${i(t)?\"have WASM\":\"don't have WASM!!!\"}, ${i(s)?\"have style\":\"don't have style!!!\"}`),o(s))return;!!i(t)&&t.setVerticalExaggerationAndOffset(this,s.volumeId,e,s.verticalOffset)||this._dbg(y.Error,\"VoxelLayerView3D._pushVerticalExaggerationToWasm() failed!\")}_pushVerticalOffsetToWasm(e){const s=this.layer.getVolumeStyle(null),t=this.view.voxelWasm;if(this._dbg(y.VerboseAPI,`VoxelLayerView3D._pushVerticalOffsetToWasm() called, ${i(t)?\"have WASM\":\"don't have WASM!!!\"}, ${i(s)?\"have style\":\"don't have style!!!\"}`),o(s))return;!!i(t)&&t.setVerticalExaggerationAndOffset(this,s.volumeId,s.verticalExaggeration,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushVerticalOffsetToWasm() failed!\")}_dbg(e,s){this._dbgFlags.has(e)&&(e===y.Error?g.error(s):g.warn(s))}};e([h()],V.prototype,\"layer\",void 0),e([h({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],V.prototype,\"baseUrl\",void 0),V=e([d(\"esri.views.3d.layers.VoxelLayerView3D\")],V);const f=V;export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import t from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(n(t.EventedMixin(r))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",t=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${t}', id: '${r}')`,e)}}))}get fullOpacity(){return l(this.get(\"layer.opacity\"),1)*l(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},r=this;return r.view&&r.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n"],"names":["n","c","arguments","slicePlaneEnabled","supportsHeightUnitConversion","e","a","this","layer","addResolvingPromise","_validateHeightModelInfo","AbortController","o","signal","handles","add","s","abort","r","view","defaultsFromMap","heightModelInfoReady","t","i","l","heightModelInfo","effectiveScaleRange","minScale","maxScale","outsideScaleRange","prototype","y","API","VerboseAPI","Error","g","V","_usedMemory","_futureMemory","type","_wasmLayerId","_handles","_dbgFlags","Set","viewingMode","_stage","renderView","renderingContext","p","capabilities","colorBufferFloat","textureFloat","spatialReference","m","currentVariableId","getVolume","getVariable","dimensions","getZDimension","size","renderingFormat","addVoxelLayerViewToWasm","then","_suspendedHandle","suspended","voxelWasm","setEnabled","renderMode","_pushRenderModeToWasm","_pushCurrentVariableIdToWasm","getDynamicSections","_pushDynamicSectionsToWasm","getSlices","_pushSlicesToWasm","getSections","_pushSectionsToWasm","getVerticalExaggeration","_pushVerticalExaggerationToWasm","getVerticalOffset","_pushVerticalOffsetToWasm","catch","removeVoxelLayerViewFromWasm","remove","isUpdating","notifyChange","nodes","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","captureFrustum","toggleFullVolumeExtentDraw","_dbg","setRenderMode","setSlices","setStaticSections","setDynamicSections","setCurrentVariable","getVolumeStyle","setVerticalExaggerationAndOffset","volumeId","verticalOffset","verticalExaggeration","has","error","warn","u","h","readOnly","aliasOf","f","d","parent","when","name","id","title","declaredClass","get","canResume","getSuspendInfo","legendEnabled","updatingHandles","updating","visible","_override","_clearOverride","loaded","ready","suspendInfo","viewNotReady","layerNotLoaded","layerInvisible","Boolean"],"sourceRoot":""}