{"version":3,"file":"static/js/56.4ac5f596.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{createBlankImage as n,resampleImage as c}from\"./support/imageUtils.js\";import p from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import y from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import g from\"../../layers/TileLayerView.js\";import{createQueryGeometry as w}from\"../../support/drapedUtils.js\";const _=[0,0];let I=class extends(g(d(o(h(y))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new p(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new f({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(s((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return a(this.layer.tileInfo?.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return w(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))))}isUpdating(){return this._fetchQueue?.updating??!1}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:l=0}=t;if(!s)try{return await this._fetchImage(e,r)}catch(h){if(!i(h)&&!this.resampling)return n(this._tileInfoView.tileInfo.size);if(l<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:l+1});return c(this._tileInfoView,r,s,e)}}throw h}const a=new u(0,0,0,0);let o;try{if(await s.fetchAvailabilityUpsample(e.level,e.row,e.col,a,{signal:r}),a.level!==e.level&&!this.resampling)return n(this._tileInfoView.tileInfo.size);o=await this._fetchImage(a,r)}catch(h){if(i(h))throw h;o=await this._fetchImage(e,r)}return this.resampling?c(this._tileInfoView,o,a,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"_fetchQueue\",void 0),e([r()],I.prototype,\"resampling\",null),I=e([l(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;export{V as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});if(\"tile\"!==a.type)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type});const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as default};\n"],"names":["_","I","arguments","_tileStrategy","_fetchQueue","layer","this","resampling","e","pause","state","update","resume","tileServers","_tileInfoView","p","tileInfo","fullExtent","f","tileInfoView","concurrency","length","process","t","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","s","doRefresh","destroy","clear","container","removeAllChildren","a","spatialReference","w","view","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","updating","_bitmapView","createTile","i","bitmap","getTileCoords","key","x","y","resolution","getTileResolution","size","width","height","addChild","abort","id","removeChild","once","tilemapCache","r","signal","resamplingLevel","l","_fetchImage","n","getTileParentId","u","c","fetchAvailabilityUpsample","level","row","col","o","has","push","source","declaredClass","error","g","d","h","prototype","V","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","createQuery","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean"],"sourceRoot":""}