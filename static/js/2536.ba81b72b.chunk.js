"use strict";(self.webpackChunkuums_front_end=self.webpackChunkuums_front_end||[]).push([[2536],{40237:function(e,t,i){i.d(t,{N:function(){return a}});var r=i(43144),n=i(15671),a={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,i){var r=new s(e.getPointX(t),e.getPointY(t),i),n=e.hasZ(t),a=e.hasM(t);return n&&(r.z=e.getPointZ(t)),a&&(r.m=e.getPointM(t)),r},exportPolygon:function(e,t,i){return new u(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,i){return new o(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,i){return new l(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,i){var r=e.hasZ(t),n=e.hasM(t),a=new c(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){var s=e.getZExtent(t);a.zmin=s.vmin,a.zmax=s.vmax}if(n){var u=e.getMExtent(t);a.mmin=u.vmin,a.mmax=u.vmax}return a}};var s=(0,r.Z)((function e(t,i,r){(0,n.Z)(this,e),this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}));var u=(0,r.Z)((function e(t,i,r,a){(0,n.Z)(this,e),this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)}));var o=(0,r.Z)((function e(t,i,r,a){(0,n.Z)(this,e),this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)}));var l=(0,r.Z)((function e(t,i,r,a){(0,n.Z)(this,e),this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)}));var c=(0,r.Z)((function e(t,i,r,a,s){(0,n.Z)(this,e),this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=a,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}))},92536:function(e,t,i){i.d(t,{y:function(){return w},r:function(){return r}});var r,n,a=i(93433),s=i(74165),u=i(1413),o=i(15861),l=i(37762),c=i(15671),f=i(43144),h=i(92026),d=i(4954),p=i(94446),m=i(58971),v=i(92975),y=i(33392),g=i(15903),x=function(){function e(t,i,r){(0,c.Z)(this,e),this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=i;var n=t.outFields;if(n&&!n.includes("*")){this.outFields=n;var a,s=0,u=(0,l.Z)(n);try{for(u.s();!(a=u.n()).done;){var o=a.value,f=(0,y.hr)(o),h=this.fieldsIndex.get(f),d=h?null:(0,y.Jc)(f,r),p=h?h.name:(0,y.nu)(o)||"FIELD_EXP_"+s++;this._fieldDataCache.set(o,{alias:p,clause:d})}}catch(m){u.e(m)}finally{u.f()}}}return(0,f.Z)(e,[{key:"countDistinctValues",value:function(e){var t=this;return this.returnDistinctValues?(e.forEach((function(e){return t.getAttributes(e)})),this._returnDistinctMap.size):e.length}},{key:"getAttributes",value:function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)}},{key:"getFieldValue",value:function(e,t,i){var r=i?i.name:t,n=null;return this._fieldDataCache.has(r)?n=this._fieldDataCache.get(r).clause:i||(n=(0,y.Jc)(t,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:n})),i?this.featureAdapter.getAttribute(e,r):n.calculateValue(e,this.featureAdapter)}},{key:"getNormalizedValue",value:function(e,t){var i=t.normalizationType,r=t.normalizationTotal,n=this.getFieldValue(e,t.field,t.fieldInfo);if(i&&Number.isFinite(n)){var a=this.getFieldValue(e,t.normalizationField,t.normalizationFieldInfo);n=(0,g.fk)(n,i,a,r)}return n}},{key:"getExpressionValue",value:function(e,t,i,r){var n={attributes:this.featureAdapter.getAttributes(e),layer:{fields:this.fieldsIndex.fields}},a=r.createExecContext(n,i);return r.executeFunction(t,a)}},{key:"getExpressionValues",value:function(e,t,i,r){var n=this,a={fields:this.fieldsIndex.fields};return e.map((function(e){var s={attributes:n.featureAdapter.getAttributes(e),layer:a},u=r.createExecContext(s,i);return r.executeFunction(t,u)}))}},{key:"validateItem",value:function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,y.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)}},{key:"validateItems",value:function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,y.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)}},{key:"_processAttributesForOutFields",value:function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);var i,r={},n=(0,l.Z)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=this._fieldDataCache.get(a),u=s.alias,o=s.clause;r[u]=o?o.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,u)}}catch(c){n.e(c)}finally{n.f()}return r}},{key:"_processAttributesForDistinctValues",value:function(e){if((0,h.Wi)(e)||!this.returnDistinctValues)return e;var t=this.outFields,i=[];if(t){var r,n=(0,l.Z)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=this._fieldDataCache.get(a).alias;i.push(e[s])}}catch(f){n.e(f)}finally{n.f()}}else for(var u in e)i.push(e[u]);var o="".concat((t||["*"]).join(","),"=").concat(i.join(",")),c=this._returnDistinctMap.get(o)||0;return this._returnDistinctMap.set(o,++c),c>1?null:e}}]),e}(),Z=i(19995),b=i(31904),_=i(80031),F=i(819),w=function(){function e(t,i,r){(0,c.Z)(this,e),this.items=t,this.query=i,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.fieldsIndex=r.fieldsIndex,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.featureAdapter=r.featureAdapter}return(0,f.Z)(e,[{key:"size",get:function(){return this.items.length}},{key:"createQueryResponseForCount",value:function(){var e=new x(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);var t=this.query,i=t.groupByFieldsForStatistics,r=t.having,n=t.outStatistics;if(!(null===i||void 0===i?void 0:i.length))return 1;var a,s=new Map,u=new Map,o=new Set,c=(0,l.Z)(n);try{for(c.s();!(a=c.n()).done;){var f=a.value,h="exceedslimit"!==f.statisticType?f.onStatisticField:void 0;if(!u.has(h)){var d,p=[],m=(0,l.Z)(i);try{for(m.s();!(d=m.n()).done;){var v=d.value,y=this._getAttributeValues(e,v,s);p.push(y)}}catch(S){m.e(S)}finally{m.f()}u.set(h,this._calculateUniqueValues(p,e.returnDistinctValues))}var g=u.get(h);for(var Z in g){var b=g[Z],_=b.data,F=b.items,w=_.join(",");r&&!e.validateItems(F,r)||o.add(w)}}}catch(S){c.e(S)}finally{c.f()}return o.size}},{key:"createQueryResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.query.outStatistics){e.next=11;break}if(!this.query.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))){e.next=5;break}e.t0=this._createExceedsLimitQueryResponse(this.query),e.next=8;break;case 5:return e.next=7,this._createStatisticsQueryResponse(this.query);case 7:e.t0=e.sent;case 8:t=e.t0,e.next=12;break;case 11:t=this._createFeatureQueryResponse(this.query);case 12:return e.abrupt("return",(this.query.returnQueryGeometry&&((0,v.JY)(this.query.outSR)&&!(0,v.fS)(this.query.geometry.spatialReference,this.query.outSR)?t.queryGeometry=(0,b.S2)((0,u.Z)({spatialReference:this.query.outSR},(0,Z.iV)(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR))):t.queryGeometry=(0,b.S2)((0,u.Z)({spatialReference:this.query.outSR},this.query.geometry))),t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createSnappingResponse",value:function(e,t){var i,n=this.featureAdapter,a=function(e,t){return e?t?4:3:t?3:2}(this.hasZ,this.hasM),s=e.point,u=s.x,o=s.y,c="number"==typeof e.distance?e.distance:e.distance.x,f="number"==typeof e.distance?e.distance:e.distance.y,d={candidates:[]},p="esriGeometryPolygon"===this.geometryType,m=this._getPointCreator(e.point,this.spatialReference,t),v=(0,l.Z)(this.items);try{for(v.s();!(i=v.n()).done;){var y=i.value,g=n.getGeometry(y);if(!(0,h.Wi)(g)){var x=g.coords,Z=g.lengths;if(e.types&r.EDGE)for(var b=0,_=0;_<Z.length;_++)for(var F=Z[_],w=0;w<F;w++,b+=a){var k=x[b],I=x[b+1];if(w!==F-1){var V=x[b+a],T=x[b+a+1],z=S(u,o,k,I,V,T),R=z.x,M=z.y,A=(u-R)/c,N=(o-M)/f,E=A*A+N*N;E<=1&&d.candidates.push({type:"edge",objectId:n.getObjectId(y),distance:Math.sqrt(E),target:m(R,M),start:m(k,I),end:m(V,T)})}}if(e.types&r.VERTEX)for(var C=p?x.length-a:x.length,D=0;D<C;D+=a){var G=x[D],P=x[D+1],q=(u-G)/c,O=(o-P)/f,j=q*q+O*O;j<=1&&d.candidates.push({type:"vertex",objectId:n.getObjectId(y),distance:Math.sqrt(j),target:m(G,P)})}}}}catch(Q){v.e(Q)}finally{v.f()}return d.candidates.sort((function(e,t){return e.distance-t.distance})),d}},{key:"_getPointCreator",value:function(e,t,i){var r=(0,h.pC)(i)&&!(0,v.fS)(t,i)?function(e){return(0,Z.iV)(e,t,i)}:function(e){return e};return null!=e.z&&null!=e.m?function(t,i){return r({x:t,y:i,z:e.z,m:e.m})}:null!=e.z?function(t,i){return r({x:t,y:i,z:e.z})}:null!=e.m?function(t,i){return r({x:t,y:i,m:e.m})}:function(e,t){return r({x:e,y:t})}}},{key:"createSummaryStatisticsResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,l,c,f,h,d,p,m,v;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.valueExpression,n=t.normalizationField,a=t.normalizationType,u=t.normalizationTotal,o=t.minValue,l=t.maxValue,c=t.scale,f=this.fieldsIndex.isDateField(i),e.next=11,this._getDataValues({field:i,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:c});case 11:return h=e.sent,d=(0,g.S5)({normalizationType:a,normalizationField:n,minValue:o,maxValue:l}),p=this.fieldsIndex.get(i),m={value:.5,fieldType:null===p||void 0===p?void 0:p.type},v=(0,_.qN)(p)?(0,g.H0)({values:h,supportsNullCount:d,percentileParams:m}):(0,g.i5)({values:h,minValue:o,maxValue:l,useSampleStdDev:!a,supportsNullCount:d,percentileParams:m}),e.abrupt("return",(0,g.F_)(v,f));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createUniqueValuesResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.valueExpression,n=t.domain,a=t.returnAllCodedValues,u=t.scale,e.next=7,this._getDataValues({field:i,valueExpression:r,scale:u});case 7:return o=e.sent,l=(0,g.eT)(o),e.abrupt("return",(0,g.Qm)(l,n,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createClassBreaksResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,l,c,f,h,d,p,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.valueExpression,n=t.normalizationField,a=t.normalizationType,u=t.normalizationTotal,o=t.classificationMethod,l=t.standardDeviationInterval,c=t.minValue,f=t.maxValue,h=t.numClasses,d=t.scale,e.next=13,this._getDataValues({field:i,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:d});case 13:return p=e.sent,m=(0,g.G2)(p,{field:i,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:o,standardDeviationInterval:l,minValue:c,maxValue:f,numClasses:h}),e.abrupt("return",(0,g.DL)(m,o));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createHistogramResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,l,c,f,h,d,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.valueExpression,n=t.normalizationField,a=t.normalizationType,u=t.normalizationTotal,o=t.classificationMethod,l=t.standardDeviationInterval,c=t.minValue,f=t.maxValue,h=t.numBins,d=t.scale,e.next=13,this._getDataValues({field:i,valueExpression:r,normalizationField:n,normalizationType:a,normalizationTotal:u,scale:d});case 13:return p=e.sent,e.abrupt("return",(0,g.oF)(p,{field:i,normalizationField:n,normalizationType:a,normalizationTotal:u,classificationMethod:o,standardDeviationInterval:l,minValue:c,maxValue:f,numBins:h}));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sortFeatures",value:function(e,t,i){var r=this;if(e.length>1&&t&&t.length){var n,a=(0,l.Z)(t.reverse());try{var s=function(){var t=n.value.split(" "),a=t[0],s=r.fieldsIndex.get(a),u=t[1]&&"desc"===t[1].toLowerCase(),o=(0,g.Lq)(null===s||void 0===s?void 0:s.type,u);e.sort((function(e,t){var r=i(e,a,s),n=i(t,a,s);return o(r,n)}))};for(a.s();!(n=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}}}},{key:"_createFeatureQueryResponse",value:function(e){var t=this,i=this.items,r=this.geometryType,n=this.hasM,s=this.hasZ,u=this.objectIdField,o=this.spatialReference,l=e.outFields,c=e.outSR,f=e.quantizationParameters,h=e.resultRecordCount,d=e.resultOffset,p=e.returnZ,v=e.returnM,y=null!=h&&i.length>(d||0)+h,g=l&&(l.includes("*")?(0,a.Z)(this.fieldsIndex.fields):l.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:y,features:this._createFeatures(e,i),fields:g,geometryType:r,hasM:n&&v,hasZ:s&&p,objectIdFieldName:u,spatialReference:(0,b.S2)(c||o),transform:f&&(0,m.vY)(f)||null}}},{key:"_createFeatures",value:function(e,t){var i=new x(e,this.featureAdapter,this.fieldsIndex),r=this.hasM,n=this.hasZ,s=e.orderByFields,u=e.quantizationParameters,o=e.returnGeometry,c=e.returnCentroid,f=e.maxAllowableOffset,h=e.resultOffset,d=e.resultRecordCount,p=e.returnZ,v=void 0!==p&&p,y=e.returnM,g=n&&v,Z=r&&(void 0!==y&&y),_=[],F=0,w=(0,a.Z)(t);if(this._sortFeatures(w,s,(function(e,t,r){return i.getFieldValue(e,t,r)})),o||c){var S=(0,m.vY)(u);if(o&&!c){var k,I=(0,l.Z)(w);try{for(I.s();!(k=I.n()).done;){var V=k.value;_[F++]={attributes:i.getAttributes(V),geometry:(0,b.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(V),f,S,g,Z)}}}catch(O){I.e(O)}finally{I.f()}}else if(!o&&c){var T,z=(0,l.Z)(w);try{for(z.s();!(T=z.n()).done;){var R=T.value;_[F++]={attributes:i.getAttributes(R),centroid:(0,b.EG)(this,this.featureAdapter.getCentroid(R,this),S)}}}catch(O){z.e(O)}finally{z.f()}}else{var M,A=(0,l.Z)(w);try{for(A.s();!(M=A.n()).done;){var N=M.value;_[F++]={attributes:i.getAttributes(N),centroid:(0,b.EG)(this,this.featureAdapter.getCentroid(N,this),S),geometry:(0,b.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(N),f,S,g,Z)}}}catch(O){A.e(O)}finally{A.f()}}}else{var E,C=(0,l.Z)(w);try{for(C.s();!(E=C.n()).done;){var D=E.value,G=i.getAttributes(D);G&&(_[F++]={attributes:G})}}catch(O){C.e(O)}finally{C.f()}}var P=h||0;if(null!=d){var q=P+d;_=_.slice(P,Math.min(_.length,q))}return _}},{key:"_createExceedsLimitQueryResponse",value:function(e){var t,i=!1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=(0,l.Z)(e.outStatistics);try{for(s.s();!(t=s.n()).done;){var u=t.value;if("exceedslimit"===u.statisticType){r=null!=u.maxPointCount?u.maxPointCount:Number.POSITIVE_INFINITY,n=null!=u.maxRecordCount?u.maxRecordCount:Number.POSITIVE_INFINITY,a=null!=u.maxVertexCount?u.maxVertexCount:Number.POSITIVE_INFINITY;break}}}catch(f){s.e(f)}finally{s.f()}if("esriGeometryPoint"===this.geometryType)i=this.items.length>r;else if(this.items.length>n)i=!0;else{var o=this.hasZ?this.hasM?4:3:this.hasM?3:2,c=this.featureAdapter;i=this.items.reduce((function(e,t){var i=c.getGeometry(t);return e+((0,h.pC)(i)&&i.coords.length||0)}),0)/o>a}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}},{key:"_createStatisticsQueryResponse",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,c,f,h,d,p,m,v,y,g,Z,b,_,F,w,S,k,I,V,T,z,R,M,A,N,E,C,D,G,P,q,O,j,Q=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={attributes:{}},r=[],n=new Map,a=new Map,u=new Map,o=new Map,c=new x(t,this.featureAdapter,this.fieldsIndex),f=t.outStatistics,h=t.groupByFieldsForStatistics,d=t.having,p=t.orderByFields,m=h&&h.length,y=(v=!!m)&&h[0],g=v&&!this.fieldsIndex.get(y),Z=(0,l.Z)(f),e.prev=2,Z.s();case 4:if((b=Z.n()).done){e.next=34;break}if(_=b.value,F=_.outStatisticFieldName,w=_.statisticType,S=_,k="exceedslimit"!==w?_.onStatisticField:void 0,I="percentile_disc"===w||"percentile_cont"===w,V="EnvelopeAggregate"===w||"CentroidAggregate"===w||"ConvexHullAggregate"===w,T=v&&1===m&&(k===y||g)&&"count"===w,!v){e.next=19;break}if(!u.has(k)){z=[],R=(0,l.Z)(h);try{for(R.s();!(M=R.n()).done;)A=M.value,N=this._getAttributeValues(c,A,n),z.push(N)}catch(Y){R.e(Y)}finally{R.f()}u.set(k,this._calculateUniqueValues(z,c.returnDistinctValues))}E=u.get(k),C=(0,s.Z)().mark((function e(t){var i,r,a,u,l,f,p,m,v,y,g,x,Z;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=E[t],r=i.count,a=i.data,u=i.items,l=i.itemPositions,f=a.join(","),d&&!c.validateItems(u,d)){e.next=17;break}if(p=o.get(f)||{attributes:{}},!V){e.next=13;break}return p.aggregateGeometries||(p.aggregateGeometries={}),e.next=7,Q._getAggregateGeometry(S,u);case 7:m=e.sent,v=m.aggregateGeometries,y=m.outStatisticFieldName,p.aggregateGeometries[y]=v,e.next=16;break;case 13:g=null,T?g=r:(x=Q._getAttributeValues(c,k,n),Z=l.map((function(e){return x[e]})),g=I&&"statisticParameters"in S?Q._getPercentileValue(S,Z):Q._getStatisticValue(S,Z,null,c.returnDistinctValues)),p.attributes[F]=g;case 16:h.forEach((function(e,t){return p.attributes[Q.fieldsIndex.get(e)?e:"EXPR_".concat(t+1)]=a[t]})),o.set(f,p);case 17:case"end":return e.stop()}}),e)})),e.t0=(0,s.Z)().keys(E);case 12:if((e.t1=e.t0()).done){e.next=17;break}return D=e.t1.value,e.delegateYield(C(D),"t2",15);case 15:e.next=12;break;case 17:e.next=31;break;case 19:if(!V){e.next=29;break}return i.aggregateGeometries||(i.aggregateGeometries={}),e.next=23,this._getAggregateGeometry(S,this.items);case 23:G=e.sent,P=G.aggregateGeometries,q=G.outStatisticFieldName,i.aggregateGeometries[q]=P,e.next=31;break;case 29:O=this._getAttributeValues(c,k,n),i.attributes[F]=I&&"statisticParameters"in S?this._getPercentileValue(S,O):this._getStatisticValue(S,O,a,c.returnDistinctValues);case 31:r.push({name:F,alias:F,type:"esriFieldTypeDouble"});case 32:e.next=4;break;case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(2),Z.e(e.t3);case 39:return e.prev=39,Z.f(),e.finish(39);case 42:return j=v?Array.from(o.values()):[i],e.abrupt("return",(this._sortFeatures(j,p,(function(e,t){return e.attributes[t]})),{fields:r,features:j}));case 44:case"end":return e.stop()}}),e,this,[[2,36,39,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getAggregateGeometry",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,r){var n,a,o,l,c,f,h,m,v,y,g,x,Z;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(3645).then(i.bind(i,50309));case 2:return n=e.sent,a=t.statisticType,o=t.outStatisticFieldName,l=this.featureAdapter,c=this.spatialReference,f=this.geometryType,h=this.hasZ,m=this.hasM,v=r.map((function(e){return(0,b.Op)(f,h,m,l.getGeometry(e))})),y=n.convexHull(c,v,!0)[0],g={aggregateGeometries:null,outStatisticFieldName:null},"EnvelopeAggregate"===a?(x=y?(0,p._w)(y):(0,p.aO)(n.union(c,v)),g.aggregateGeometries=(0,u.Z)((0,u.Z)({},x),{},{spatialReference:c}),g.outStatisticFieldName=o||"extent"):"CentroidAggregate"===a?(Z=y?(0,d.tO)(y):(0,d.$G)((0,p.aO)(n.union(c,v))),g.aggregateGeometries={x:Z[0],y:Z[1],spatialReference:c},g.outStatisticFieldName=o||"centroid"):"ConvexHullAggregate"===a&&(g.aggregateGeometries=y,g.outStatisticFieldName=o||"convexHull"),e.abrupt("return",g);case 15:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getStatisticValue",value:function(e,t,i,r){var n,a=e.onStatisticField,s=e.statisticType;return n=null!==i&&void 0!==i&&i.has(a)?i.get(a):(0,_.qN)(this.fieldsIndex.get(a))?(0,g.H0)({values:t,returnDistinct:r}):(0,g.i5)({values:t,minValue:null,maxValue:null,useSampleStdDev:!0}),i&&i.set(a,n),n["var"===s?"variance":s]}},{key:"_getPercentileValue",value:function(e,t){var i=e.onStatisticField,r=e.statisticParameters,n=e.statisticType,a=r.value,s=r.orderBy,u=this.fieldsIndex.get(i);return(0,g.XL)(t,{value:a,orderBy:s,fieldType:null===u||void 0===u?void 0:u.type,isDiscrete:"percentile_disc"===n})}},{key:"_getAttributeValues",value:function(e,t,i){if(i.has(t))return i.get(t);var r=this.fieldsIndex.get(t),n=this.items.map((function(i){return e.getFieldValue(i,t,r)}));return i.set(t,n),n}},{key:"_getAttributeNormalizedValues",value:function(e,t){var i=this;return this.items.map((function(r){return e.getNormalizedValue(r,{field:t.field,fieldInfo:i.fieldsIndex.get(t.field),normalizationField:t.normalizationField,normalizationFieldInfo:i.fieldsIndex.get(t.normalizationField),normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})}))}},{key:"_getAttributeExpressionValues",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,i,r){var n,a,u,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.LC)();case 2:return n=e.sent,a=n.arcadeUtils,u=a.createFunction(i),o=r&&a.getViewInfo(r),e.abrupt("return",t.getExpressionValues(this.items,u,o,a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,i,r){return e.apply(this,arguments)}}()},{key:"_calculateUniqueValues",value:function(e,t){for(var i={},r=this.items,n=r.length,a=0;a<n;a++){var s,u=r[a],o=[],c=(0,l.Z)(e);try{for(c.s();!(s=c.n()).done;){var f=s.value;o.push(f[a])}}catch(d){c.e(d)}finally{c.f()}var h=o.join(",");t?null==i[h]&&(i[h]={count:1,data:o,items:[u],itemPositions:[a]}):null==i[h]?i[h]={count:1,data:o,items:[u],itemPositions:[a]}:(i[h].count++,i[h].items.push(u),i[h].itemPositions.push(a))}return i}},{key:"_getDataValues",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var i,r,n,a,u,o,l,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new x(this.query,this.featureAdapter,this.fieldsIndex),r=t.valueExpression,n=t.field,a=t.normalizationField,u=t.normalizationType,o=t.normalizationTotal,l=t.scale,c=r?{viewingMode:"map",scale:l,spatialReference:this.query.outSR||this.spatialReference}:null,e.abrupt("return",r?this._getAttributeExpressionValues(i,r,c):this._getAttributeNormalizedValues(i,{field:n,normalizationField:a,normalizationType:u,normalizationTotal:o}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function S(e,t,i,r,n,a){var s=n-i,u=a-r,o=s*s+u*u,l=(e-i)*s+(t-r)*u,c=Math.min(1,Math.max(0,l/o));return{x:i+s*c,y:r+u*c}}(n=r||(r={}))[n.NONE=0]="NONE",n[n.EDGE=1]="EDGE",n[n.VERTEX=2]="VERTEX"},33392:function(e,t,i){i.d(t,{nu:function(){return Z},hr:function(){return x},Jc:function(){return y},G3:function(){return b},Of:function(){return g},z4:function(){return v},hO:function(){return m}});var r=i(93433),n=i(37762),a=i(10064),s=i(15671),u=i(43144),o=i(59026),l=i(48562),c=function(){function e(t,i){(0,s.Z)(this,e),this._cache=new o.Z(t),this._invalidCache=new o.Z(i)}return(0,u.Z)(e,[{key:"get",value:function(e,t){var i="".concat(t.uid,":").concat(e),r=this._cache.get(i);if(r)return r;if(void 0!==this._invalidCache.get(i))return null;try{var n=l.WhereClause.create(e,t);return this._cache.put(i,n),n}catch(a){return this._invalidCache.put(i,null),null}}}]),e}(),f=new c(50,500),h="feature-store:unsupported-query",d=" as ",p=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function m(e,t){if(!t)return!0;var i=f.get(t,e);if(!i)throw new a.Z(h,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new a.Z(h,"where clause is not standard",{where:t});return g(e,i.fieldNames,"where clause contains missing fields"),!0}function v(e,t,i){if(!t)return!0;var r=f.get(t,e);if(!r)throw new a.Z(h,"invalid SQL expression",{having:t});if(!r.isAggregate)throw new a.Z(h,"having does not contain a valid aggregate function",{having:t});var n=r.fieldNames;if(g(e,n,"having contains missing fields"),!r.getExpressions().every((function(t){var r=t.aggregateType,n=t.field,a=e.has(n)&&e.get(n).name;return i.some((function(t){var i=t.onStatisticField,n=t.statisticType;return(e.has(i)&&e.get(i).name)===a&&n.toLowerCase().trim()===r}))})))throw new a.Z(h,"expressions in having should also exist in outStatistics",{having:t});return!0}function y(e,t){return e?f.get(e,t):null}function g(e,t,i){var s,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],l=(0,n.Z)(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;if("*"!==c&&!e.has(c))if(u){var f=x(c);try{var d=y(f,e);if(!d)throw new a.Z(h,"invalid SQL expression",{where:f});if(!d.isStandardized)throw new a.Z(h,"expression is not standard",{clause:d});g(e,d.fieldNames,"expression contains missing fields")}catch(v){var p=v&&v.details;if(p&&(p.clause||p.where))throw v;p&&p.missingFields?o.push.apply(o,(0,r.Z)(p.missingFields)):o.push(c)}}else o.push(c)}}catch(m){l.e(m)}finally{l.f()}if(o.length)throw new a.Z(h,i,{missingFields:o})}function x(e){return e.split(d)[0]}function Z(e){return e.split(d)[1]}function b(e,t){var i=t.get(e);return!!i&&!p.has(i.type)}},19995:function(e,t,i){i.d(t,{_W:function(){return g},iV:function(){return _},oj:function(){return S}});var r=i(74165),n=i(15671),a=i(43144),s=i(15861),u=i(37762),o=i(29439),l=i(92026),c=i(79803),f=i(40237),h=i(92975),d=i(81753),p=[0,0];function m(e,t){if(!t)return null;if("x"in t){var i,r,n={x:0,y:0};return i=e(t.x,t.y,p),r=(0,o.Z)(i,2),n.x=r[0],n.y=r[1],null!=t.z&&(n.z=t.z),null!=t.m&&(n.m=t.m),n}if("xmin"in t){var a,s,u,l,c={xmin:0,ymin:0,xmax:0,ymax:0};return a=e(t.xmin,t.ymin,p),s=(0,o.Z)(a,2),c.xmin=s[0],c.ymin=s[1],u=e(t.xmax,t.ymax,p),l=(0,o.Z)(u,2),c.xmax=l[0],c.ymax=l[1],t.hasZ&&(c.zmin=t.zmin,c.zmax=t.zmax,c.hasZ=!0),t.hasM&&(c.mmin=t.mmin,c.mmax=t.mmax,c.hasM=!0),c}return"rings"in t?{rings:v(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:v(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:y(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function v(e,t){var i,r=[],n=(0,u.Z)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;r.push(y(a,t))}}catch(s){n.e(s)}finally{n.f()}return r}function y(e,t){var i,r=[],n=(0,u.Z)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t(a[0],a[1],[0,0]);r.push(s),a.length>2&&s.push(a[2]),a.length>3&&s.push(a[3])}}catch(o){n.e(o)}finally{n.f()}return r}function g(e,t){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)((0,r.Z)().mark((function e(t,i){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return n=Array.isArray(t)?t.map((function(e){return(0,l.pC)(e.geometry)&&e.geometry.spatialReference})):[t],e.next=5,(0,c.iQ)(n.map((function(e){return{source:e,dest:i}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=m.bind(null,d.hG),b=m.bind(null,d.R6);function _(e,t,i,r){if(!e)return e;if(i||(i=t,t=e.spatialReference),!(0,h.JY)(t)||!(0,h.JY)(i)||(0,h.fS)(t,i))return e;if((0,d.Q8)(t,i)){var n=(0,h.sS)(i)?Z(e):b(e);return n.spatialReference=i,n}return(0,c.oj)(f.N,[e],t,i,null,r)[0]}var F=function(){function e(){(0,n.Z)(this,e),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return(0,a.Z)(e,[{key:"push",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,i,n){var a,s=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length&&i&&n&&!(0,h.fS)(i,n)){e.next=2;break}return e.abrupt("return",t);case 2:return a={geometries:t,inSpatialReference:i,outSpatialReference:n,resolve:null},e.abrupt("return",(this._jobs.push(a),new Promise((function(e){a.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t,i,r){return e.apply(this,arguments)}}()},{key:"_process",value:function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,i=e.inSpatialReference,r=e.outSpatialReference,n=e.resolve;(0,d.Q8)(i,r)?(0,h.sS)(r)?n(t.map(Z)):n(t.map(b)):n((0,c.oj)(f.N,t,i,r,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),e}(),w=new F;function S(e,t,i){return w.push(e,t,i)}},31904:function(e,t,i){i.d(t,{EG:function(){return b},Op:function(){return _},S2:function(){return R},Up:function(){return F},j6:function(){return S},vF:function(){return v}});var r=i(74165),n=i(15861),a=i(43404),s=i(92026),u=i(68860),o=i(94446),l=i(77981),c=i(50689),f=i(92975),h=i(83406),d=i(80457),p=i(19995),m=new a.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),v=Object.freeze({}),y=new d.Z,g=new d.Z,x=new d.Z,Z={esriGeometryPoint:h.fQ,esriGeometryPolyline:h.J6,esriGeometryPolygon:h.eG,esriGeometryMultipoint:h.Iv};function b(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.hasZ,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.hasM;if((0,s.Wi)(t))return null;var a=e.hasZ&&r,u=e.hasM&&n;if(i){var o=(0,h.Nh)(x,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,n);return(0,h.fQ)(o,a,u)}return(0,h.fQ)(t,a,u)}function _(e,t,i,r,n,a){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:i,l=t&&u,c=i&&o,f=(0,s.pC)(r)?"coords"in r?r:r.geometry:null;if((0,s.Wi)(f))return null;if(n){var d=(0,h.zj)(g,f,t,i,e,n,u,o);return a&&(d=(0,h.Nh)(x,d,l,c,e,a)),Z[e](d,l,c)}if(a){var p=(0,h.Nh)(x,f,t,i,e,a,u,o);return Z[e](p,l,c)}return(0,h.hY)(y,f,t,i,u,o),Z[e](y,l,c)}function F(e,t,i){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)((0,r.Z)().mark((function e(t,i,n){var a,s,u,o,l,c,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.outFields,s=t.orderByFields,u=t.groupByFieldsForStatistics,o=t.outStatistics,a)for(l=0;l<a.length;l++)a[l]=a[l].trim();if(s)for(c=0;c<s.length;c++)s[c]=s[c].trim();if(u)for(f=0;f<u.length;f++)u[f]=u[f].trim();if(o)for(h=0;h<o.length;h++)o[h].onStatisticField&&(o[h].onStatisticField=o[h].onStatisticField.trim());return e.abrupt("return",(t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),S(t,i,n)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,i){return k.apply(this,arguments)}function k(){return(k=(0,n.Z)((0,r.Z)().mark((function e(t,i,n){var a,u,f,h,d,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(a=t.where,t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||i&&i===a)&&(t.where=null),t.geometry){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,I(t);case 7:return u=e.sent,t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&(f=t.geometry.spatialReference,(u=(0,o.aO)(u)).spatialReference=f),t.geometry=u,e.next=12,(0,p._W)(u.spatialReference,n);case 12:return e.next=14,(0,c.aX)((0,l.im)(u));case 14:if(h=e.sent[0],!(0,s.Wi)(h)){e.next=17;break}throw v;case 17:return d=h.toJSON(),e.next=20,(0,p.iV)(d,d.spatialReference,n);case 20:if(m=e.sent){e.next=23;break}throw v;case 23:return e.abrupt("return",(m.spatialReference=n,t.geometry=m,t));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return V.apply(this,arguments)}function V(){return(V=(0,n.Z)((0,r.Z)().mark((function e(t){var i,n,a,s,o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.geometry,n=t.distance,a=t.units,null!=n&&!("vertexAttributes"in i)){e.next=3;break}return e.abrupt("return",i);case 3:if(s=i.spatialReference,o=a?m.fromJSON(a):(0,u.qE)(s),!s||!(0,f.sT)(s)&&!(0,f.sS)(s)){e.next=9;break}e.t0=i,e.next=12;break;case 9:return e.next=11,(0,p._W)(s,f.Zn).then((function(){return(0,p.iV)(i,f.Zn)}));case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,T();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t1)(l.spatialReference,l,n,o));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return z.apply(this,arguments)}function z(){return(z=(0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(3645).then(i.bind(i,50309));case 2:return e.abrupt("return",e.sent.geodesicBuffer);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return e&&M in e?JSON.parse(JSON.stringify(e,A)):e}var M="_geVersion",A=function(e,t){return e!==M?t:void 0}}}]);
//# sourceMappingURL=2536.ba81b72b.chunk.js.map