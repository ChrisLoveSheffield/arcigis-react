{"version":3,"file":"static/js/3082.bb7cedbc.chunk.js","mappings":"oZAIy9BA,EAAC,+IAAiB,WAAc,OAAOC,KAAKC,QAAS,KAApD,GAAeC,EAAAA,IAAuCC,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,IAAE,CAACC,KAAKC,OAAOC,KAAK,CAACC,MAAK,MAAOT,EAAEU,UAAU,gBAAW,GAAQV,GAAEI,EAAAA,EAAAA,GAAE,EAACO,EAAAA,EAAAA,GAAE,mDAAmDX,G,IAASY,EAAAA,WAAE,WAAYR,IAAE,eAACH,KAAKY,SAAST,EAAEH,KAAKa,aAAa,IAAIC,GAAI,C,sCAAA,WAAUd,KAAKa,aAAaE,OAAQ,G,iBAAA,SAAIZ,GAAGH,KAAKa,aAAaG,IAAIb,EAAEF,SAASE,EAAG,G,iBAAA,SAAIA,GAAG,OAAOH,KAAKa,aAAaI,IAAId,EAAG,G,qBAAA,SAAQA,GAAGH,KAAKa,aAAaK,QAAQf,EAAG,G,wBAAA,SAAWA,GAAG,IAAMD,EAAEF,KAAKa,aAAaI,IAAId,GAAG,OAAOD,GAAGA,EAAEiB,YAAYjB,EAAEkB,MAAM,KAAKpB,KAAKa,aAAaQ,OAAOlB,GAAGD,GAAG,IAAK,G,oBAAA,SAAOC,EAAED,GAAGF,KAAKY,SAAST,EAAED,EAAG,G,gBAAA,WAAW,OAAOF,KAAKa,aAAaS,IAAK,K,EAAzZX,GAA8ZY,EAAC,0CAAwB,aAAa,6BAAC,eAASC,YAAgBC,YAAY,CAACC,UAAU,EAAEC,OAAO,GAAG,EAAKC,SAAS,IAAIC,EAAAA,EAA/E,CAAiF,CAAtH,yCAAsH,WAAY,WAAC7B,KAAK8B,oBAAoB9B,KAAKoB,MAAMW,MAAM,kBAAI,EAAKC,UAAT,IAAuB,GAApM,qBAAoM,WAAUhC,KAAKe,OAAQ,GAA3N,4BAA2N,WAAiBf,KAAKiC,oBAAoBC,cAAclC,KAAKiC,mBAAmBjC,KAAKiC,kBAAkB,EAAG,GAArU,mBAAqU,WAAQjC,KAAKmC,iBAAiBnC,KAAKoC,aAAapC,KAAKoC,WAAWC,UAAUrC,KAAKoC,WAAW,MAAMpC,KAAKsC,QAAQtC,KAAKsC,MAAMD,UAAUrC,KAAKsC,MAAM,MAAMtC,KAAK4B,SAASb,QAAQf,KAAKuC,QAAQC,WAAY,GAAvgB,oBAAugB,WAAe,OAAOxC,KAAKoC,YAAY,cAAcpC,KAAKoC,WAAWK,gBAAiB,GAA7lB,sBAA6lB,WAAU,WAAatC,EAAeH,KAArBoB,MAAkBlB,EAAGF,KAAb0C,UAA6BC,EAAmLxC,EAA7LyC,UAA6BC,EAAgK1C,EAAjL2C,iBAAwCC,EAAyI5C,EAA9J6C,qBAA0CC,EAAoH9C,EAAvI+C,mBAAmC9C,EAAoGD,EAAlHgD,cAAyBzC,EAAyFP,EAAlGiD,SAAwBvB,EAA0E1B,EAAvFkD,aAAuCC,EAAgDnD,EAAxEoD,wBAAkDxD,EAAsBI,EAA9CqD,wBAA2CjC,EAAGpB,EAApBsD,iBAAsBC,EAAEC,EAAAA,GAAAA,OAASxD,EAAEyD,cAAcC,EAAEhB,EAAEiB,EAAE5D,EAAE6D,KAAKjB,iBAAiBkB,EAAE,CAACC,SAAShB,EAAEiB,MAAMnB,GAAG/C,KAAKe,QAAQf,KAAKmE,KAAK,cAAaC,EAAAA,EAAAA,GAAEzB,EAAEkB,EAAEC,EAAEJ,EAAEM,EAAEV,EAAEvD,EAAEwB,IAAIvB,KAAKqE,qBAAqBP,EAAEQ,SAAStE,KAAKsC,MAAM,IAAI3B,EAAEX,KAAKuE,UAAUC,KAAKxE,OAAOA,KAAKyE,gBAAgB,IAAIC,EAAAA,GAAE1E,KAAKsC,MAAMlC,EAAEM,EAAE4D,SAASzC,GAAG,IAAM8C,EAAE,kBAAkB3E,KAAKuC,QAAQqC,OAAOD,GAAG3E,KAAKuC,QAAQsC,IAAI,CAAC7E,KAAKoC,WAAW0C,GAAG,WAAW,SAAA3E,GAAC,OAAE,EAAK4E,WAAW5E,EAAlB,KAAuB6E,EAAAA,EAAAA,KAAG,iBAAI,CAAC7E,EAAE6C,qBAAqB7C,EAAE+C,mBAAmB/C,EAAEkD,aAAnD,IAAmE,kBAAI,EAAKrB,UAAT,KAAuB2C,GAAG3E,KAAKiF,qBAAsB,GAA30C,wBAA20C,SAAW9E,GAAGH,KAAKyB,YAAYC,YAAY1B,KAAK0C,UAAUwC,iBAAiB,kBAAkBlF,KAAK0C,UAAUyC,KAAK,gBAAgB,CAACC,WAAWjF,EAAEiF,WAAWC,SAASlF,EAAEkF,SAASpB,SAAS9D,EAAE8D,WAAW,KAAIlB,EAAAA,EAAAA,IAAE5C,EAAE8D,YAAY9D,EAAE8D,SAASnB,mBAAmB3C,EAAE8D,SAASnB,iBAAiB9C,KAAKqE,sBAAsB,IAAMnE,EAAEH,EAAEuF,SAASnF,GAAGD,EAAEiB,YAAYjB,EAAEkB,MAAMpB,KAAKoB,MAAMpB,KAAKyE,gBAAgBI,IAAI3E,EAAU,CAAP,SAAO,CAAC,GAAntD,uBAAmtD,SAAUC,EAAED,IAAG6C,EAAAA,EAAAA,IAAE7C,IAAIF,KAAK4B,SAAS2D,WAAWrF,IAAG6C,EAAAA,EAAAA,IAAE5C,KAAKH,KAAKyB,YAAYE,QAAQxB,EAAEqF,OAAOxF,KAAK4B,SAAS6D,QAAQtF,GAAI,GAAv0D,iCAAu0D,WAAqB,WAACH,KAAKmC,iBAAiB,IAAqBhC,EAAGH,KAAKoB,MAAvBsE,eAAiCxF,EAAEyF,YAAYC,MAAM5F,KAAKiC,kBAAkB4D,aAAa,WAAK,IAAM1F,EAAEwF,YAAYC,MAAMjD,EAAExC,EAAED,EAAE,GAAGyC,EAA/lF,KAAmmF,CAACzC,EAAEC,EAAE,IAAM0C,EAAEiD,KAAKC,MAAM,EAAKtE,YAAYE,QAAQgB,EAAE,MAAMI,EAAE+C,KAAKC,MAAM,EAAKtE,YAAYC,WAAWiB,EAAE,MAAM,EAAKlB,YAAYE,OAAO,EAAE,EAAKF,YAAYC,UAAU,EAAE,EAAKgB,UAAUyC,KAAK,cAAc,CAACxD,OAAOkB,EAAEnB,UAAUqB,GAAI,GAAK0B,gBAAgBuB,iBAAkB,GAAE7F,EAAG,GAArwE,yBAAqwE,WAAcH,KAAKmC,gBAAiB,GAAzyE,0BAAyyE,WAAenC,KAAKiF,qBAAsB,KAAn1E,IAAepC,EAAAA,EAAAA,IAAEI,EAAAA,EAAAA,GAAEN,EAAAA,MAAk0ExC,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEd,UAAU,kBAAa,IAAQN,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEd,UAAU,aAAQ,IAAQN,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEd,UAAU,iBAAY,IAAQN,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,IAAE,CAAC6F,UAAS,KAAM1E,EAAEd,UAAU,WAAW,MAAMc,GAAEpB,EAAAA,EAAAA,GAAE,EAACO,EAAAA,EAAAA,GAAE,sDAAsDa,G,sECA3yGZ,EAAC,0CAA2B,aAAa,6BAAC,eAASa,YAAgBnB,KAAK,YAAY,EAAK6F,aAAaxF,EAAAA,GAAAA,MAAQ,EAAKyF,MAAK,EAAG,EAAKC,MAAK,EAA5F,CAA+F,CAAvI,yCAAuI,WAAY,WAACpG,KAAKuC,QAAQsC,KAAI3E,EAAAA,EAAAA,KAAG,kBAAI,EAAKmG,SAAT,IAAqB,SAAA1D,GAAI,EAAK2D,aAAa3D,EAAE,EAAK2D,WAAWC,cAAc,EAAKD,WAAWE,eAAgB,IAAI,GAAvR,2BAAuR,WAAsB,IAAM7D,EAAE3C,KAAKiB,IAAI,qCAAqC,GAAG0B,EAAE,OAAO,IAAIxC,EAAAA,EAAE,oBAAoBwC,EAAG,GAA5Y,yBAA4Y,WAAc,OAAO,IAAIqC,EAAAA,EAAE,CAACyB,UAAU,CAAC,KAAKC,gBAAe,EAAGC,oBAAoB3G,KAAK+D,KAAKjB,kBAAmB,GAA3f,qCAA2f,SAAwBH,EAAExC,GAAG,OAAOH,KAAK4G,YAAYC,kCAAkC7G,KAAK8G,aAAanE,GAArE,OAAwExC,QAAxE,IAAwEA,OAAxE,EAAwEA,EAAG4G,OAAQ,GAAlnB,8BAAknB,WAAmB,OAAO,IAAI9D,EAAE,CAAC7B,MAAMpB,KAAKoB,MAAMsB,UAAU1C,MAAO,GAArrB,iCAAqrB,WAAuB,KAA5sB,GCAnd,SAAA+C,GAAI,IAAIrC,EAAC,0CAAiB,SAAAA,IAAiB,iDAAFiC,EAAE,yBAAFA,EAAE,uBAAC,+BAASA,KAAQqE,gBAAgB,KAAK,EAAKvE,iBAAiB,eAAe,EAAKwE,OAAO,KAAxF,CAA6F,CAA/H,kBAAelE,GAAkH,OAAOJ,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACoD,UAAS,KAAMvF,EAAED,UAAU,uBAAkB,IAAQkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACqE,QAAQ,yCAAyCjB,UAAS,KAAMvF,EAAED,UAAU,wBAAmB,IAAQkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACxC,KAAKF,EAAAA,KAAKO,EAAED,UAAU,cAAS,GAAQC,GAAEiC,EAAAA,EAAAA,GAAE,EAACzC,EAAAA,EAAAA,GAAE,uCAAuCQ,EAAK,CDAyE4C,EAAElD,EAAAA,EAAAA,IAAEyB,EAAAA,EAAAA,GAAE6C,EAAAA,OAAyrB/B,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACoD,UAAS,KAAMtF,EAAEF,UAAU,oBAAe,IAAQkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACoD,UAAS,KAAMtF,EAAEF,UAAU,kBAAkB,OAAMkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,OAAKlC,EAAEF,UAAU,kBAAa,IAAQkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACoD,UAAS,KAAMtF,EAAEF,UAAU,YAAO,IAAQkC,EAAAA,EAAAA,GAAE,EAACE,EAAAA,EAAAA,IAAE,CAACoD,UAAS,KAAMtF,EAAEF,UAAU,YAAO,GAA6D,IAAMV,EAA3DY,GAAEgC,EAAAA,EAAAA,GAAE,EAACI,EAAAA,EAAAA,GAAE,2CAA2CpC,E","sources":["../node_modules/@arcgis/core/layers/graphics/controllers/StreamController.js","../node_modules/@arcgis/core/views/3d/layers/StreamLayerView3D.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Accessor.js\";import{HandleOwnerMixin as o}from\"../../../core/HandleOwner.js\";import{isSome as s}from\"../../../core/maybe.js\";import{EsriPromiseMixin as i}from\"../../../core/Promise.js\";import{watch as a}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamFeatureManager as p}from\"../data/StreamFeatureManager.js\";import{createConnection as h}from\"../sources/connections/createConnection.js\";import{EventedSet as l}from\"../../../views/3d/support/EventedSet.js\";import{featureGeometryTypeKebabDictionary as d}from\"../../../geometry/support/typeUtils.js\";const m=2500;let u=class extends t{getObjectId(){return this.objectId}};e([n({type:Number,json:{read:!0}})],u.prototype,\"objectId\",void 0),u=e([c(\"esri.layers.graphics.controllers.StreamGraphic\")],u);class y{constructor(e){this.onUpdate=e,this._idToGraphic=new Map}destroy(){this._idToGraphic.clear()}add(e){this._idToGraphic.set(e.objectId,e)}get(e){return this._idToGraphic.get(e)}forEach(e){this._idToGraphic.forEach(e)}removeById(e){const t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._idToGraphic.size}}let f=class extends(o(i(r))){constructor(){super(...arguments),this._updateInfo={websocket:0,client:0},this.graphics=new l}initialize(){this.addResolvingPromise(this.layer.when((()=>this._startup())))}destroy(){this.clear()}_clearInterval(){this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=0)}clear(){this._clearInterval(),this.connection&&(this.connection.destroy(),this.connection=null),this.store&&(this.store.destroy(),this.store=null),this.graphics.clear(),this.handles.removeAll()}get updating(){return!this.connection||\"connected\"===this.connection.connectionStatus}_startup(){const{layer:e,layerView:t}=this,{parsedUrl:r,spatialReference:o,definitionExpression:s,geometryDefinition:i,objectIdField:n,timeInfo:c,purgeOptions:l,maxReconnectionAttempts:m,maxReconnectionInterval:u,customParameters:f}=e,_=d.toJSON(e.geometryType),g=o,I=t.view.spatialReference,v={geometry:i,where:s};this.clear(),this._set(\"connection\",h(r,g,I,_,v,m,u,f)),this._outSpatialReference=I.toJSON(),this.store=new y(this._onUpdate.bind(this)),this.featuresManager=new p(this.store,n,c.toJSON(),l);const j=\"startup-watches\";this.handles.remove(j),this.handles.add([this.connection.on(\"feature\",(e=>this._onFeature(e))),a((()=>[e.definitionExpression,e.geometryDefinition,e.purgeOptions]),(()=>this._startup()))],j),this._initUpdateInterval()}_onFeature(e){this._updateInfo.websocket++,this.layerView.hasEventListener(\"data-received\")&&this.layerView.emit(\"data-received\",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{s(e.geometry)&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._outSpatialReference);const t=u.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch{}}_onUpdate(e,t){s(t)&&this.graphics.removeMany(t),s(e)&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}_initUpdateInterval(){this._clearInterval();const{updateInterval:e}=this.layer;let t=performance.now();this._updateIntervalId=setInterval((()=>{const e=performance.now(),r=e-t;if(r>m){t=e;const o=Math.round(this._updateInfo.client/(r/1e3)),s=Math.round(this._updateInfo.websocket/(r/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.layerView.emit(\"update-rate\",{client:o,websocket:s})}this.featuresManager.checkForUpdates()}),e)}pauseStream(){this._clearInterval()}resumeStream(){this._initUpdateInterval()}};e([n()],f.prototype,\"connection\",void 0),e([n()],f.prototype,\"layer\",void 0),e([n()],f.prototype,\"layerView\",void 0),e([n({readOnly:!0})],f.prototype,\"updating\",null),f=e([c(\"esri.layers.graphics.controllers.StreamController\")],f);export{f as StreamController,u as StreamGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Error.js\";import{watch as t}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as i}from\"../../../layers/graphics/controllers/StreamController.js\";import a from\"../../../rest/support/Query.js\";import{FeatureLikeLayerView3D as n}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{UpdatePolicy as c}from\"../webgl-engine/lib/basicInterfaces.js\";import p from\"../../layers/LayerView.js\";import m from\"../../layers/StreamLayerView.js\";let y=class extends(m(n(l(p)))){constructor(){super(...arguments),this.type=\"stream-3d\",this.updatePolicy=c.ASYNC,this.hasZ=!0,this.hasM=!1}initialize(){this.handles.add(t((()=>this.suspended),(r=>{this.controller&&(r?this.controller.pauseStream():this.controller.resumeStream())})))}get connectionError(){const r=this.get(\"controller.connection.errorString\");if(r)return new e(\"stream-controller\",r)}createQuery(){return new a({outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryLatestObservations(r,e){return this.queryEngine.executeQueryForLatestObservations(this._ensureQuery(r),e?.signal)}createController(){return new i({layer:this.layer,layerView:this})}beforeSetController(){}};r([o({readOnly:!0})],y.prototype,\"updatePolicy\",void 0),r([o({readOnly:!0})],y.prototype,\"connectionError\",null),r([o()],y.prototype,\"controller\",void 0),r([o({readOnly:!0})],y.prototype,\"hasZ\",void 0),r([o({readOnly:!0})],y.prototype,\"hasM\",void 0),y=r([s(\"esri.views.3d.layers.StreamLayerView3D\")],y);const u=y;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import e from\"../../layers/support/FeatureFilter.js\";const s=s=>{let c=class extends s{constructor(...r){super(...r),this.connectionError=null,this.connectionStatus=\"disconnected\",this.filter=null}};return r([o({readOnly:!0})],c.prototype,\"connectionError\",void 0),r([o({aliasOf:\"controller.connection.connectionStatus\",readOnly:!0})],c.prototype,\"connectionStatus\",void 0),r([o({type:e})],c.prototype,\"filter\",void 0),c=r([t(\"esri.layers.mixins.StreamLayerView\")],c),c};export{s as default};\n"],"names":["u","this","objectId","t","e","n","type","Number","json","read","prototype","c","y","onUpdate","_idToGraphic","Map","clear","set","get","forEach","sourceLayer","layer","delete","size","f","arguments","_updateInfo","websocket","client","graphics","l","addResolvingPromise","when","_startup","_updateIntervalId","clearInterval","_clearInterval","connection","destroy","store","handles","removeAll","connectionStatus","layerView","r","parsedUrl","o","spatialReference","s","definitionExpression","i","geometryDefinition","objectIdField","timeInfo","purgeOptions","m","maxReconnectionAttempts","maxReconnectionInterval","customParameters","_","d","geometryType","g","I","view","v","geometry","where","_set","h","_outSpatialReference","toJSON","_onUpdate","bind","featuresManager","p","j","remove","add","on","_onFeature","a","_initUpdateInterval","hasEventListener","emit","attributes","centroid","fromJSON","removeMany","length","addMany","updateInterval","performance","now","setInterval","Math","round","checkForUpdates","readOnly","updatePolicy","hasZ","hasM","suspended","controller","pauseStream","resumeStream","outFields","returnGeometry","outSpatialReference","queryEngine","executeQueryForLatestObservations","_ensureQuery","signal","connectionError","filter","aliasOf"],"sourceRoot":""}