{"version":3,"file":"static/js/1283.1f2a3bb1.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/ImageryLayerView3D.js","../node_modules/@arcgis/core/views/layers/ImageryLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{isNone as t}from\"../../../core/maybe.js\";import{debounce as a}from\"../../../core/promiseUtils.js\";import{when as i}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./DynamicLayerView3D.js\";import o from\"../../layers/ImageryLayerView.js\";let n=class extends(o(s)){constructor(){super(...arguments),this.type=\"imagery-3d\",this.redrawDebounced=a((async e=>{this.redraw(((e,t)=>this._redrawImage(e,t)),e)}),2e3)}initialize(){this.handles.add([i((()=>this.view.basemapTerrain.ready),(()=>this._initializeMaximumDataResolution()),{once:!0,initial:!0}),this.layer.on(\"redraw\",(()=>this.updatingHandles.addPromise(this.redrawDebounced())))]),this.updatingHandles.add((()=>this.layer?.exportImageServiceParameters?.version),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())})),this.updatingHandles.add((()=>this.timeExtent),(()=>this.updatingHandles.addPromise(this.refreshDebounced())))}_initializeMaximumDataResolution(){const e=this.view.basemapTerrain.spatialReference,t=this.layer.fullExtent;!t||e.equals(t.spatialReference),this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}getFetchOptions(){return{timeExtent:this.timeExtent}}async processResult(e,t,a){t.imageElement?e.image=t.imageElement:(e.image=document.createElement(\"canvas\"),e.pixelData=t.pixelData,await this._redrawImage(e,a))}async _redrawImage(e,a){if(!(e.image instanceof HTMLCanvasElement)||t(e.pixelData))throw new Error;const i=e.image,r=i.getContext(\"2d\"),s=await this.layer.applyRenderer(e.pixelData,{signal:a}),o=this.layer.applyFilter(s).pixelBlock;if(t(o))throw new Error;i.width=o.width,i.height=o.height;const n=r.createImageData(o.width,o.height);n.data.set(o.getAsRGBA()),r.putImageData(n,0,0)}};n=e([r(\"esri.views.3d.layers.ImageryLayerView3D\")],n);const m=n;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isNone as t,isSome as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as a}from\"../../layers/support/commonProperties.js\";import n from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const m=m=>{let c=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,s){const{layer:p}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:p});const{popupEnabled:a}=p,m=u(p,s);if(!a||t(m))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:m});const c=await m.getRequiredFields(),l=new n;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=c,l.outSpatialReference=e.spatialReference;const y=this.view.resolution,h=\"2d\"===this.view.type?new i(y,y,this.view.spatialReference):new i(.5*y,.5*y,this.view.spatialReference),{returnTopmostRaster:w,showNoDataRecords:d}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:w,pixelSize:h,showNoDataRecords:d,signal:o(s)?s.signal:null};return p.queryVisibleRasters(l,f).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([s()],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"suspended\",void 0),e([s(a)],c.prototype,\"timeExtent\",void 0),e([s()],c.prototype,\"view\",void 0),c=e([p(\"esri.views.layers.ImageryLayerView\")],c),c};export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as l}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as t}from\"../../../layers/support/fieldUtils.js\";async function d(l,d=l.popupTemplate){if(e(d))return[];const s=await d.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:i}=d,{objectIdField:n,typeIdField:u,globalIdField:a,relationships:o}=l;if(s.includes(\"*\"))return[\"*\"];const r=i?await p(l):[],f=t(l.fieldsIndex,[...s,...r]);return u&&f.push(u),f&&n&&l.fieldsIndex.has(n)&&!f.includes(n)&&f.push(n),f&&a&&l.fieldsIndex.has(a)&&!f.includes(a)&&f.push(a),o&&o.forEach((e=>{const{keyField:p}=e;f&&p&&l.fieldsIndex.has(p)&&!f.includes(p)&&f.push(p)})),f}function s(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{s as getFetchPopupTemplate,d as getRequiredFields};\n"],"names":["n","arguments","type","redrawDebounced","a","e","redraw","t","_redrawImage","this","handles","add","i","view","basemapTerrain","ready","_initializeMaximumDataResolution","once","initial","layer","on","updatingHandles","addPromise","exportImageServiceParameters","version","refreshDebounced","timeExtent","spatialReference","fullExtent","equals","maximumDataResolution","x","pixelSizeX","y","pixelSizeY","imageElement","image","document","createElement","pixelData","HTMLCanvasElement","Error","r","getContext","applyRenderer","signal","s","o","applyFilter","pixelBlock","width","height","createImageData","data","set","getAsRGBA","putImageData","m","c","p","popupEnabled","u","popupTemplate","getRequiredFields","l","geometry","outFields","outSpatialReference","resolution","h","layerOptions","returnTopmostRaster","showNoDataRecords","w","d","f","returnDomainValues","pixelSize","queryVisibleRasters","then","isEmpty","prototype","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","push","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}