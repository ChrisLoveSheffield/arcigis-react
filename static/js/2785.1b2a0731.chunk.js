"use strict";(self.webpackChunkuums_front_end=self.webpackChunkuums_front_end||[]).push([[2785],{42785:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(74165),a=r(15861),i=r(1413),o=r(15671),l=r(43144),s=r(60136),u=r(29388),c=r(27366),p=r(76200),d=r(10064),h=r(32718),y=r(92026),v=r(97642),f=r(66978),m=r(35995),g=r(49861),w=(r(63780),r(93169),r(25243),r(38511)),_=r(69912),b=r(90724),k=r(30651),C=r(17775),Z=r(11936),S=r(6061),T=r(29598),x=r(45948),I=r(41665),D=h.Z.getLogger("esri.layers.ElevationLayer"),V=function(e){(0,s.Z)(c,e);var t=(0,u.Z)(c);function c(){var e;(0,o.Z)(this,c);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).copyright=null,e.heightModelInfo=null,e.path=null,e.opacity=1,e.operationalLayerType="ArcGISTiledElevationServiceLayer",e.sourceJSON=null,e.type="elevation",e.url=null,e.version=null,e._lercDecoder=(0,I.w)(),e}return(0,l.Z)(c,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,i.Z)({url:e},t):e}},{key:"destroy",value:function(){this._lercDecoder=(0,y.RY)(this._lercDecoder)}},{key:"minScale",get:function(){},set:function(e){this.constructed&&D.warn("".concat(this.declaredClass,".minScale support has been removed (since 4.5)"))}},{key:"maxScale",get:function(){},set:function(e){this.constructed&&D.warn("".concat(this.declaredClass,".maxScale support has been removed (since 4.5)"))}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=9.3),r}},{key:"load",value:function(e){var t=this,r=(0,y.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new d.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(f.r9).then((function(){return t._fetchImageService(r)}))),Promise.resolve(this)}},{key:"fetchTile",value:function(e,t,r,n){var a=this,i=(0,y.pC)((n=n||{signal:null}).signal)?n.signal:n.signal=(new AbortController).signal,o={responseType:"array-buffer",signal:i},l={noDataValue:n.noDataValue,returnFileInfo:!0};return this.load().then((function(){return a._fetchTileAvailability(e,t,r,n)})).then((function(){return(0,p.default)(a.getTileUrl(e,t,r),o)})).then((function(e){return a._lercDecoder.decode(e.data,l,i)})).then((function(e){return{values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue}}))}},{key:"getTileUrl",value:function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,a=(0,m.B7)((0,i.Z)((0,i.Z)({},this.parsedUrl.query),{},{blankTile:!n&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(r).concat(a?"?"+a:"")}},{key:"queryElevation",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,a){var i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(7165).then(r.bind(r,67165));case 2:return i=e.sent,o=i.ElevationQuery,(0,f.k_)(a),e.abrupt("return",(new o).query(this,t,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,a){var i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(7165).then(r.bind(r,67165));case 2:return i=e.sent,o=i.ElevationQuery,(0,f.k_)(a),e.abrupt("return",(new o).createSampler(this,t,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchTileAvailability",value:function(e,t,r,n){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,n):Promise.resolve("unknown")}},{key:"_fetchImageService",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",this.sourceJSON);case 2:return r={query:(0,i.Z)({f:"json"},this.parsedUrl.query),responseType:"json",signal:t},e.next=5,(0,p.default)(this.parsedUrl.path,r);case 5:(a=e.sent).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=a.data,this.read(a.data,{origin:"service",url:this.parsedUrl});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]),c}((0,C.Z)((0,Z.Y)((0,S.q)((0,T.I)((0,v.R)(k.Z))))));(0,c._)([(0,g.Cb)({json:{read:{source:"copyrightText"}}})],V.prototype,"copyright",void 0),(0,c._)([(0,g.Cb)({readOnly:!0,type:b.Z})],V.prototype,"heightModelInfo",void 0),(0,c._)([(0,g.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],V.prototype,"path",void 0),(0,c._)([(0,g.Cb)({type:["show","hide"]})],V.prototype,"listMode",void 0),(0,c._)([(0,g.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],V.prototype,"minScale",null),(0,c._)([(0,g.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],V.prototype,"maxScale",null),(0,c._)([(0,g.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],V.prototype,"opacity",void 0),(0,c._)([(0,g.Cb)({type:["ArcGISTiledElevationServiceLayer"]})],V.prototype,"operationalLayerType",void 0),(0,c._)([(0,g.Cb)()],V.prototype,"sourceJSON",void 0),(0,c._)([(0,g.Cb)({json:{read:!1},value:"elevation",readOnly:!0})],V.prototype,"type",void 0),(0,c._)([(0,g.Cb)(x.HQ)],V.prototype,"url",void 0),(0,c._)([(0,g.Cb)()],V.prototype,"version",void 0),(0,c._)([(0,w.r)("version",["currentVersion"])],V.prototype,"readVersion",null),(V=(0,c._)([(0,_.j)("esri.layers.ElevationLayer")],V)).prototype.fetchTile.__isDefault__=!0;var E=V}}]);
//# sourceMappingURL=2785.1b2a0731.chunk.js.map