{"version":3,"file":"static/js/7165.97668066.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/ElevationTile.js","../node_modules/@arcgis/core/layers/support/ElevationQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as a}from\"../../core/maybe.js\";class i{constructor(a,i=null){if(this.tile=a,this.zmin=0,this.zmax=0,t(i)){const t=a.extent;this.samplerData={pixelData:i.values,width:i.width,height:i.height,safeWidth:.99999999*(i.width-1),noDataValue:i.noDataValue,dx:(i.width-1)/(t[2]-t[0]),dy:(i.width-1)/(t[3]-t[1]),x0:t[0],y1:t[3]},this.zmin=i.minValue,this.zmax=i.maxValue}}sample(t,i){if(a(this.samplerData))return;const{safeWidth:h,width:s,pixelData:l,noDataValue:n,dx:o,dy:r,y1:m,x0:d}=this.samplerData,u=e(r*(m-i),0,h),x=e(o*(t-d),0,h),f=Math.floor(u),c=Math.floor(x),p=f*s+c,D=p+s,w=l[p],y=l[D],V=l[p+1],z=l[D+1];if(w!==n&&y!==n&&V!==n&&z!==n){const t=x-c,a=w+(V-w)*t;return a+(y+(z-y)*t-a)*(u-f)}}}function e(t,a,i){return t<a?a:t>i?i:t}export{i as ElevationTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{result as e}from\"../../core/asyncUtils.js\";import t from\"../../core/Error.js\";import{isNone as i,isSome as o}from\"../../core/maybe.js\";import{whenOrAbort as s,throwIfAbortError as l,eachAlways as n}from\"../../core/promiseUtils.js\";import{getMetersPerUnitForSR as a}from\"../../core/unitUtils.js\";import r from\"../../geometry/Multipoint.js\";import c from\"../../geometry/Point.js\";import u from\"../../geometry/Polyline.js\";import{initializeProjection as h,project as p}from\"../../geometry/projection.js\";import{fromExtent as m,create as f,contains as d}from\"../../geometry/support/aaBoundingRect.js\";import{MultiTileElevationSampler as y}from\"./ElevationSampler.js\";import{ElevationTile as T}from\"./ElevationTile.js\";class v{async queryAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");const s=x.fromGeometry(i);let l=!1;o&&o.returnSampleInfo||(l=!0);const n={...R,...o,returnSampleInfo:!0},a=await this.query(e[e.length-1],s,n),r=await this._queryAllContinue(e,a,n);return r.geometry=r.geometry.export(),l&&delete r.sampleInfo,r}async query(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||!(i instanceof x)&&\"point\"!==i.type&&\"multipoint\"!==i.type&&\"polyline\"!==i.type)throw new t(\"elevation-query:invalid-geometry\",\"Only point, polyline and multipoint geometries can be used to query elevation\");const s={...R,...o},l=new w(e,i.spatialReference,s),n=s.signal;return await e.load({signal:n}),await this._createGeometryDescriptor(l,i,n),await this._selectTiles(l,n),await this._populateElevationTiles(l,n),this._sampleGeometryWithElevation(l),this._createQueryResult(l,n)}async createSampler(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o};return this._createSampler(e,i,s)}async createSamplerAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o,returnSampleInfo:!0},l=await this._createSampler(e[e.length-1],i,s);return this._createSamplerAllContinue(e,i,l,s)}async _createSampler(e,t,i,o){const s=i.signal;await e.load({signal:s});const l=t.spatialReference,n=e.tileInfo.spatialReference;l.equals(n)||(await h([{source:l,dest:n}],{signal:s}),t=p(t,n));const a=new _(e,t,i,o);return await this._selectTiles(a,s),await this._populateElevationTiles(a,s),new y(a.elevationTiles,a.layer.tileInfo,a.options.noDataValue)}async _createSamplerAllContinue(e,t,i,o){if(e.pop(),!e.length)return i;const s=i.samplers.map((e=>m(e.extent))),l=await this._createSampler(e[e.length-1],t,o,s);if(0===l.samplers.length)return i;const n=i.samplers.concat(l.samplers),a=new y(n,o.noDataValue);return this._createSamplerAllContinue(e,t,a,o)}async _queryAllContinue(e,t,i){const o=e.pop(),s=t.geometry.coordinates,l=[],n=[];for(let c=0;c<s.length;c++){const i=t.sampleInfo[c];i.demResolution>=0?i.source||(i.source=o):e.length&&(l.push(s[c]),n.push(c))}if(!e.length||0===l.length)return t;const a=t.geometry.clone(l),r=await this.query(e[e.length-1],a,i);return n.forEach(((e,i)=>{s[e].z=r.geometry.coordinates[i].z,t.sampleInfo[e].demResolution=r.sampleInfo[i].demResolution})),this._queryAllContinue(e,t,i)}async _createQueryResult(e,t){const i={geometry:(await e.geometry.project(e.outSpatialReference,t)).export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(i.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach((e=>{e.tile=null,e.elevationTile=null})),i}async _createGeometryDescriptor(e,i,o){let s;const l=e.layer.tileInfo.spatialReference;if(i instanceof x?s=await i.project(l,o):(await h([{source:i.spatialReference,dest:l}],{signal:o}),s=p(i,l)),!s)throw new t(\"elevation-query:spatial-reference-mismatch\",`Cannot query elevation in '${i.spatialReference.wkid}' on an elevation service in '${l.wkid}'`);e.geometry=x.fromGeometry(s)}async _selectTiles(e,i){const o=e.options.demResolution;if(\"geometry\"===e.type&&this._preselectOutsideLayerExtent(e),\"number\"==typeof o)this._selectTilesClosestResolution(e);else if(\"finest-contiguous\"===o)await this._selectTilesFinestContiguous(e,i);else{if(\"auto\"!==o)throw new t(\"elevation-query:invalid-dem-resolution\",`Invalid dem resolution value '${o}', expected a number, \"finest-contiguous\" or \"auto\"`);await this._selectTilesAuto(e,i)}}_preselectOutsideLayerExtent(e){if(i(e.layer.fullExtent))return;const t=new T(null);t.sample=()=>e.options.noDataValue,e.outsideExtentTile=t;const o=e.layer.fullExtent;e.geometry.coordinates.forEach((e=>{const i=e.x,s=e.y;(i<o.xmin||i>o.xmax||s<o.ymin||s>o.ymax)&&(e.elevationTile=t)}))}_selectTilesClosestResolution(e){const t=e.layer.tileInfo,i=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(i)}_findNearestDemResolutionLODIndex(e,t){const i=t/a(e.spatialReference);let o=e.lods[0],s=0;for(let l=1;l<e.lods.length;l++){const t=e.lods[l];Math.abs(t.resolution-i)<Math.abs(o.resolution-i)&&(o=t,s=l)}return s}async _selectTilesFinestContiguous(e,t){const i=E(e.layer.tileInfo,e.options.minDemResolution);await this._selectTilesFinestContiguousAt(e,i,t)}async _selectTilesFinestContiguousAt(e,i,o){const n=e.layer;if(e.selectTilesAtLOD(i),i<0)return;const a=n.tilemapCache,r=e.getTilesToFetch();try{if(a)await s(Promise.all(r.map((e=>a.fetchAvailability(e.level,e.row,e.col,{signal:o})))),o);else if(await this._populateElevationTiles(e,o),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new t(\"elevation-query:has-unavailable-tiles\")}catch(c){l(c),await this._selectTilesFinestContiguousAt(e,i-1,o)}}async _populateElevationTiles(e,t){const i=e.getTilesToFetch(),l={},a=e.options.cache,r=e.options.noDataValue,c=i.map((async i=>{const s=`${e.layer.uid}:${i.id}:${r}`,n=o(a)?a.get(s):null,c=o(n)?n:await e.layer.fetchTile(i.level,i.row,i.col,{noDataValue:r,signal:t});o(a)&&a.put(s,c),l[i.id]=new T(i,c)}));await s(n(c),t),e.populateElevationTiles(l)}async _selectTilesAuto(t,i){this._selectTilesAutoFinest(t),this._reduceTilesForMaximumRequests(t);const o=t.layer.tilemapCache;if(!o)return this._selectTilesAutoPrefetchUpsample(t,i);const n=t.getTilesToFetch(),a={},r=n.map((async t=>{const s={id:null,level:0,row:0,col:0,extent:f()},n=await e(o.fetchAvailabilityUpsample(t.level,t.row,t.col,s,{signal:i}));!1===n.ok?l(n.error):a[t.id]=s}));await s(Promise.all(r),i),t.remapTiles(a)}_reduceTilesForMaximumRequests(e){const t=e.layer.tileInfo;let i=0;const o={},s=e=>{e.id in o?o[e.id]++:(o[e.id]=1,i++)},l=e=>{const t=o[e.id];1===t?(delete o[e.id],i--):o[e.id]=t-1};e.forEachTileToFetch(s,l);let n=!0;for(;n&&(n=!1,e.forEachTileToFetch((o=>{i<=e.options.maximumAutoTileRequests||(l(o),t.upsampleTile(o)&&(n=!0),s(o))}),l),n););}_selectTilesAutoFinest(e){const t=E(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests)}async _selectTilesAutoPrefetchUpsample(e,t){const i=e.layer.tileInfo;await this._populateElevationTiles(e,t);let o=!1;e.forEachTileToFetch(((e,t)=>{i.upsampleTile(e)?o=!0:t()})),o&&await this._selectTilesAutoPrefetchUpsample(e,t)}_sampleGeometryWithElevation(e){e.geometry.coordinates.forEach((t=>{const i=t.elevationTile;let s=e.options.noDataValue;if(i){const e=i.sample(t.x,t.y);o(e)?s=e:t.elevationTile=null}t.z=s}))}_extractSampleInfo(e){const t=e.layer.tileInfo,i=a(t.spatialReference);return e.geometry.coordinates.map((o=>{let s=-1;if(o.elevationTile&&o.elevationTile!==e.outsideExtentTile){s=t.lodAt(o.elevationTile.tile.level).resolution*i}return{demResolution:s}}))}}class x{export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){const t=new x;return t.geometry=this.geometry,t.spatialReference=this.spatialReference,t.coordinates=e||this.coordinates.map((e=>this._cloneCoordinate(e))),t._exporter=this._exporter,t}async project(e,t){if(this.spatialReference.equals(e))return this.clone();await h([{source:this.spatialReference,dest:e}],{signal:t});const i=new r({spatialReference:this.spatialReference,points:this.coordinates.map((e=>[e.x,e.y]))}),o=p(i,e);if(!o)return null;const s=this.coordinates.map(((e,t)=>{const i=this._cloneCoordinate(e),s=o.points[t];return i.x=s[0],i.y=s[1],i})),l=this.clone(s);return l.spatialReference=e,l}_cloneCoordinate(e){return{x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}}static fromGeometry(e){const t=new x;if(t.geometry=e,t.spatialReference=e.spatialReference,e instanceof x)t.coordinates=e.coordinates.map((e=>t._cloneCoordinate(e))),t._exporter=(t,i)=>{const o=e.clone(t);return o.spatialReference=i,o};else switch(e.type){case\"point\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?[{x:i.x,y:i.y,z:i.z,m:i.m}]:o?[{x:i.x,y:i.y,z:i.z}]:s?[{x:i.x,y:i.y,m:i.m}]:[{x:i.x,y:i.y}],t._exporter=(t,i)=>e.hasM?new c(t[0].x,t[0].y,t[0].z,t[0].m,i):new c(t[0].x,t[0].y,t[0].z,i);break}case\"multipoint\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?i.points.map((e=>({x:e[0],y:e[1],z:e[2],m:e[3]}))):o?i.points.map((e=>({x:e[0],y:e[1],z:e[2]}))):s?i.points.map((e=>({x:e[0],y:e[1],m:e[2]}))):i.points.map((e=>({x:e[0],y:e[1]}))),t._exporter=(t,i)=>e.hasM?new r({points:t.map((e=>[e.x,e.y,e.z,e.m])),hasZ:!0,hasM:!0,spatiaReference:i}):new r(t.map((e=>[e.x,e.y,e.z])),i);break}case\"polyline\":{const i=e,o=[],s=[],{hasZ:l,hasM:n}=e;let a=0;for(const e of i.paths)if(s.push([a,a+e.length]),a+=e.length,l&&n)for(const t of e)o.push({x:t[0],y:t[1],z:t[2],m:t[3]});else if(l)for(const t of e)o.push({x:t[0],y:t[1],z:t[2]});else if(n)for(const t of e)o.push({x:t[0],y:t[1],m:t[2]});else for(const t of e)o.push({x:t[0],y:t[1]});t.coordinates=o,t._exporter=(t,i)=>{const o=e.hasM?t.map((e=>[e.x,e.y,e.z,e.m])):t.map((e=>[e.x,e.y,e.z])),l=s.map((e=>o.slice(e[0],e[1])));return new u({paths:l,hasM:e.hasM,hasZ:!0,spatialReference:i})};break}}return t}}class g{constructor(e,t){this.layer=e,this.options=t}}class w extends g{constructor(e,t,i){super(e,i),this.outSpatialReference=t,this.type=\"geometry\"}selectTilesAtLOD(e){if(e<0)this.geometry.coordinates.forEach((e=>e.tile=null));else{const t=this.layer.tileInfo,i=t.lods[e].level;this.geometry.coordinates.forEach((e=>{e.tile=t.tileAt(i,e.x,e.y)}))}}allElevationTilesFetched(){return!this.geometry.coordinates.some((e=>!e.elevationTile))}clearElevationTiles(){for(const e of this.geometry.coordinates)e.elevationTile!==this.outsideExtentTile&&(e.elevationTile=null)}populateElevationTiles(e){for(const t of this.geometry.coordinates)!t.elevationTile&&t.tile&&(t.elevationTile=e[t.tile.id])}remapTiles(e){for(const t of this.geometry.coordinates)t.tile=e[t.tile.id]}getTilesToFetch(){const e={},t=[];for(const i of this.geometry.coordinates){const o=i.tile;i.elevationTile||!i.tile||e[o.id]||(e[o.id]=o,t.push(o))}return t}forEachTileToFetch(e){for(const t of this.geometry.coordinates)t.tile&&!t.elevationTile&&e(t.tile,(()=>t.tile=null))}}class _ extends g{constructor(e,t,i,o){super(e,i),this.type=\"extent\",this.elevationTiles=[],this.candidateTiles=[],this.fetchedCandidates=new Set,this.extent=t.intersection(e.fullExtent),this.maskExtents=o}selectTilesAtLOD(e,t){const i=this._maximumLodForRequests(t),o=Math.min(i,e);o<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(o)}_maximumLodForRequests(e){const t=this.layer.tileInfo;if(!e)return t.lods.length-1;const o=this.extent;if(i(o))return-1;for(let i=t.lods.length-1;i>=0;i--){const s=t.lods[i],l=s.resolution*t.size[0],n=s.resolution*t.size[1];if(Math.ceil(o.width/l)*Math.ceil(o.height/n)<=e)return i}return-1}allElevationTilesFetched(){return this.candidateTiles.length===this.elevationTiles.length}clearElevationTiles(){this.elevationTiles.length=0,this.fetchedCandidates.clear()}populateElevationTiles(e){for(const t of this.candidateTiles){const i=e[t.id];i&&(this.fetchedCandidates.add(t),this.elevationTiles.push(i))}}remapTiles(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map((t=>e[t.id])))}getTilesToFetch(){return this.candidateTiles}forEachTileToFetch(e,t){const i=this.candidateTiles;this.candidateTiles=[],i.forEach((i=>{if(this.fetchedCandidates.has(i))return void(t&&t(i));let o=!1;e(i,(()=>o=!0)),o?t&&t(i):this.candidateTiles.push(i)})),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t)}_uniqueNonOverlappingTiles(e,t){const i={},o=[];for(const l of e)i[l.id]?t&&t(l):(i[l.id]=l,o.push(l));const s=o.sort(((e,t)=>e.level-t.level));return s.filter(((e,i)=>{for(let o=0;o<i;o++)if(d(s[o].extent,e.extent))return t&&t(e),!1;return!0}))}_selectCandidateTilesCoveringExtentAt(e){this.candidateTiles.length=0;const t=this.extent;if(i(t))return;const o=this.layer.tileInfo,s=o.lods[e],l=o.tileAt(s.level,t.xmin,t.ymin),n=s.resolution*o.size[0],a=s.resolution*o.size[1],r=Math.ceil((t.xmax-l.extent[0])/n),c=Math.ceil((t.ymax-l.extent[1])/a);for(let i=0;i<c;i++)for(let e=0;e<r;e++){const t={id:null,level:l.level,row:l.row-i,col:l.col+e};o.updateTileInfo(t),this._tileIsMasked(t)||this.candidateTiles.push(t)}}_tileIsMasked(e){return!!this.maskExtents&&this.maskExtents.some((t=>d(t,e.extent)))}}function E(e,t){let i=e.lods.length-1;if(t>0){const o=e.lods.findIndex((e=>e.resolution<t));0===o?i=0:o>0&&(i=o-1)}return i}const R={maximumAutoTileRequests:20,noDataValue:0,returnSampleInfo:!1,demResolution:\"auto\",minDemResolution:0};export{v as ElevationQuery,x as GeometryDescriptor,E as getFinestLodIndex};\n"],"names":["i","a","this","tile","zmin","zmax","t","extent","samplerData","pixelData","values","width","height","safeWidth","noDataValue","dx","dy","x0","y1","minValue","maxValue","h","s","l","n","o","r","m","d","u","e","x","f","Math","floor","c","p","D","w","y","V","z","v","ignoreInvisibleLayers","filter","visible","slice","length","fromGeometry","returnSampleInfo","R","query","_queryAllContinue","geometry","export","sampleInfo","type","spatialReference","signal","load","_createGeometryDescriptor","_selectTiles","_populateElevationTiles","_sampleGeometryWithElevation","_createQueryResult","_createSampler","_createSamplerAllContinue","tileInfo","equals","source","dest","_","elevationTiles","layer","options","pop","samplers","map","concat","coordinates","demResolution","push","clone","forEach","project","outSpatialReference","_extractSampleInfo","elevationTile","wkid","_preselectOutsideLayerExtent","_selectTilesClosestResolution","_selectTilesFinestContiguous","_selectTilesAuto","fullExtent","T","sample","outsideExtentTile","xmin","xmax","ymin","ymax","_findNearestDemResolutionLODIndex","selectTilesAtLOD","lods","abs","resolution","E","minDemResolution","_selectTilesFinestContiguousAt","tilemapCache","getTilesToFetch","Promise","all","fetchAvailability","level","row","col","allElevationTilesFetched","clearElevationTiles","cache","uid","id","get","fetchTile","put","populateElevationTiles","_selectTilesAutoFinest","_reduceTilesForMaximumRequests","_selectTilesAutoPrefetchUpsample","fetchAvailabilityUpsample","ok","error","remapTiles","forEachTileToFetch","maximumAutoTileRequests","upsampleTile","lodAt","_exporter","_cloneCoordinate","points","hasZ","hasM","spatiaReference","paths","g","tileAt","some","candidateTiles","fetchedCandidates","Set","intersection","maskExtents","_maximumLodForRequests","min","_selectCandidateTilesCoveringExtentAt","size","ceil","clear","add","_uniqueNonOverlappingTiles","has","sort","updateTileInfo","_tileIsMasked","findIndex"],"sourceRoot":""}