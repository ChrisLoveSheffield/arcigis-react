"use strict";(self.webpackChunkuums_front_end=self.webpackChunkuums_front_end||[]).push([[7225],{46169:function(e,t,r){r.d(t,{Z:function(){return d},s:function(){return c}});var n,i,a=r(37762),u=r(84652),o=r(92026),s=r(99879),l={setAttribute:function(){},rollback:function(){},commit:function(){}};function c(e,t){var r=t.attributes[e.objectIdField],i=e.sessions.get(r);if(i)return i;var s=(0,u.d9)(t.attributes),c=new Set;if(null==r)return l;var d=e.attributeOverrides.createInteractiveEditSession(r),f=new Map,p=function(e,t){var n=f.get(e);if(null==n){var i=t.indexOf(r);return f.set(e,i),i}return n},y=n.EDITING,v={setAttribute:function(r,i){if(y===n.EDITING){var a=e.fieldsIndex.get(r);if(!(0,o.Wi)(a)){var u=e.attributeStorageInfo.findIndex((function(e){return e.name===a.name}));if(!(u<0)){d.set(u,i);var s=e.attributeStorageInfo[u],l=!1;c.add(r),e.forEachNode((function(r,n){var a=p(r,n);if(-1!==a){var u=e.getAttributeData(r.index);if(u){var o=u[s.name];o&&(o[a]=i,e.setAttributeData(r.index,u,t),l=!0)}}})),l&&e.clearMemCache()}}}},rollback:function(){if(y===n.EDITING){var t,i=(0,a.Z)(c);try{for(i.s();!(t=i.n()).done;){var u=t.value;this.setAttribute(u,s[u])}}catch(o){i.e(o)}finally{i.f()}d.rollback(),y=n.ROLLED_BACK,e.sessions.delete(r)}},commit:function(){y===n.EDITING&&(d.commit(),y=n.COMMITTED,e.sessions.delete(r))}};return e.sessions.set(r,v),v}function d(e,t){var r=function(e,t){var r=t.edits.updateFeatures;if(!r||0===r.length)return new y;for(var n=function(e){var t=new Set;if(!e.updatedFeatures)return t;var r,n=(0,a.Z)(e.updatedFeatures);try{for(n.s();!(r=n.n()).done;){var i=r.value;null!=i.objectId&&null==i.error&&t.add(i.objectId)}}catch(u){n.e(u)}finally{n.f()}return t}(t),i=new y,u=new Map,o=0;o<e.attributeStorageInfo.length;o++)u.set(e.attributeStorageInfo[o].name,o);var l=e.fieldsIndex,c=e.objectIdField,d=r.filter((function(e){var t=(0,s.g)(l,e.attributes,c);return n.has(t)}));return e.forEachNode((function(t,r){var n,u=new Set(r),o=(0,a.Z)(d);try{for(o.s();!(n=o.n()).done;){var p=n.value,y=(0,s.g)(l,p.attributes,c);if(u.has(y)){var v=r.indexOf(y);for(var h in p.attributes){var g=e.fieldsIndex.normalizeFieldName(h),m=f(i,t.index,g),b=p.attributes[h];m.push({featureIndex:v,featureId:y,value:b})}}}}catch(w){o.e(w)}finally{o.f()}})),i}(e,t);if(0!==r.size){for(var n=new Map,i=0;i<e.attributeStorageInfo.length;i++)n.set(e.attributeStorageInfo[i].name,i);var u=!1;r.forEach((function(t,r){var i=e.getAttributeData(r),s=!1;t.forEach((function(t,r){var l,c=(0,o.pC)(i)?i[r]:null,d=n.get(r),f=(0,a.Z)(t);try{for(f.s();!(l=f.n()).done;){var p=l.value,y=p.featureIndex,v=p.value,h=p.featureId;c&&(c[y]=v,s=!0,u=!0),e.attributeOverrides.updateValue(h,d,v)}}catch(g){f.e(g)}finally{f.f()}})),s&&e.setAttributeData(r,i,null)})),u&&e.clearMemCache()}}function f(e,t,r){var n=function(e,t){var r=e.get(t);if(r)return r;var n=new p;return e.set(t,n),n}(e,t),i=n.get(r);if(i)return i;var a=new Array;return n.set(r,a),a}(i=n||(n={}))[i.EDITING=0]="EDITING",i[i.ROLLED_BACK=1]="ROLLED_BACK",i[i.COMMITTED=2]="COMMITTED";var p=Map,y=Map},23224:function(e,t,r){r.d(t,{i:function(){return g}});var n=r(93433),i=r(37762),a=r(74165),u=r(15861),o=r(15671),s=r(43144),l=r(60136),c=r(29388),d=r(27366),f=r(10064),p=r(92026),y=(r(32718),r(25243),r(63780),r(93169),r(75366),r(69912)),v=r(80031),h=r(24405),g=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"_validateFetchPopupFeatures",value:function(e){var t=this.layer;return t.popupEnabled?(0,h.V)(t,e)?void 0:new f.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new f.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:t})}},{key:"prepareFetchPopupFeatures",value:function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPopupFeatures",value:function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t,r){var u,o,s,l,c,d,f,y,g,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=this._validateFetchPopupFeatures(r))){e.next=3;break}throw u;case 3:if((o=(0,p.pC)(r)?r.clientGraphics:null)&&0!==o.length){e.next=6;break}return e.abrupt("return",[]);case 6:return s="scene"===this.layer.type&&(0,p.pC)(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,e.t0=v.Lk,e.t1=this.layer.fieldsIndex,e.next=11,(0,h.e)(s,(0,h.V)(this.layer,r));case 11:return e.t2=e.sent,l=(0,e.t0)(e.t1,e.t2),e.next=15,this.prepareFetchPopupFeatures(l);case 15:c=new Set,d=[],f=[],y=(0,i.Z)(o);try{for(y.s();!(g=y.n()).done;)m=g.value,(0,v.Gm)(l,m,c)?f.push(m):d.push(m)}catch(t){y.e(t)}finally{y.f()}return e.abrupt("return",0===f.length?d:this.whenGraphicAttributes(f,(0,n.Z)(c)).catch((function(){return f})).then((function(e){return d.concat(e)})));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(e);return t=(0,d._)([(0,y.j)("esri.views.3d.layers.support.PopupSceneLayerView")],t)}},6777:function(e,t,r){r.d(t,{K:function(){return I}});var n,i,a=r(74165),u=r(15861),o=r(93433),s=r(15671),l=r(43144),c=r(60136),d=r(29388),f=r(27366),p=r(85015),y=r(32718),v=r(39052),h=r(49861),g=r(69912),m=r(50898),b=function(e){var t=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments))._numUpdating=0,e.asyncUpdateState=new Map,e}return(0,l.Z)(r,[{key:"updating",get:function(){return this._numUpdating>0}},{key:"autoUpdateAsync",value:function(e,t){var r=this;return function(e,t){var r=function(){a&&!u&&e(n)},n=function(){if(!a||u)return t();a.clear(),u=!0;var e=(0,v.LJ)(a,t);return u=!1,e},i=function(){a&&(a.destroy(),a=null)},a=new m.M(r),u=!1;return e(n),{remove:i}}((function(t){return r._updateAsync(e,t)}),t)}},{key:"_updateAsync",value:function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._startAsyncUpdate(t)){e.next=12;break}return e.prev=1,e.next=4,r();case 4:n=e.sent,this._set(t,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y.Z.getLogger(this.declaredClass).warn('Async update of "'.concat(String(t),'" failed. Async update functions should not throw exceptions.'));case 11:this._endAsyncUpdate(t)&&this._updateAsync(t,r);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_startAsyncUpdate",value:function(e){var t,r=null!==(t=this.asyncUpdateState.get(e))&&void 0!==t?t:n.None;return r&n.Updating?(this.asyncUpdateState.set(e,r|n.Invalidated),!0):(++this._numUpdating,this.asyncUpdateState.set(e,r|n.Updating),!1)}},{key:"_endAsyncUpdate",value:function(e){var t;--this._numUpdating;var r=(null!==(t=this.asyncUpdateState.get(e))&&void 0!==t?t:n.None)&~n.Updating;return r&n.Invalidated?(this.asyncUpdateState.set(e,r&~n.Invalidated),!0):(this.asyncUpdateState.set(e,r),!1)}}]),r}(e);return(0,f._)([(0,h.Cb)({readOnly:!0})],t.prototype,"updating",null),(0,f._)([(0,h.Cb)()],t.prototype,"_numUpdating",void 0),t=(0,f._)([(0,g.j)("esri.core.AsyncUpdate")],t)};(i=n||(n={}))[i.None=0]="None",i[i.Updating=1]="Updating",i[i.Invalidated=2]="Invalidated";var w=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,l.Z)(r)}(b(p.Z));w=(0,f._)([(0,g.j)("esri.core.AsyncUpdate")],w);var _=r(41691),Z=r(92026),F=(r(63780),r(93169),r(25243),r(80031)),E=y.Z.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields"),I=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"requiredFields",get:function(){var e=this.layerView,t=e.layer.fieldsIndex,r=e.definitionExpressionFields,n=this.rendererFields,i=this.labelingFields,a=this.viewFilterFields;return(0,F.Q0)(t,[].concat((0,o.Z)((0,Z.Pt)(r,[])),(0,o.Z)((0,Z.Pt)(n,[])),(0,o.Z)((0,Z.Pt)(i,[])),(0,o.Z)((0,Z.Pt)(a,[]))))}},{key:"initialize",value:function(){var e=this,t=this.layerView.layer;this.layer=t,this.handles.add([this.autoUpdateAsync("rendererFields",(function(){var t=e.layer,r=t.fieldsIndex,n=t.renderer;return n?k((function(e){return n.collectRequiredFields(e,r)})):null})),this.autoUpdateAsync("labelingFields",(function(){var t=e.layer;return t.labelsVisible?k((function(e){return(0,F.Mu)(e,t)})):null})),this.autoUpdateAsync("viewFilterFields",(function(){var t=e.layerView,r=t.layer,n=t.filter;return k((function(e){return(0,F.Ll)(e,r,n)}))}))])}}]),r}(b(_.r));function k(e){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Set,e.prev=1,e.next=4,t(r);case 4:return e.abrupt("return",Array.from(r).sort());case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",(E.error(e.t0),null));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}(0,f._)([(0,h.Cb)()],I.prototype,"layerView",void 0),(0,f._)([(0,h.Cb)()],I.prototype,"layer",void 0),(0,f._)([(0,h.Cb)()],I.prototype,"requiredFields",null),(0,f._)([(0,h.Cb)()],I.prototype,"rendererFields",void 0),(0,f._)([(0,h.Cb)()],I.prototype,"labelingFields",void 0),(0,f._)([(0,h.Cb)()],I.prototype,"viewFilterFields",void 0),I=(0,f._)([(0,g.j)("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],I)},48252:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(93433),i=r(80031);function a(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){var e=this.layer,t=this.layer.fieldsIndex,r=this.requiredFields;return e.outFields?(0,i.Q0)(t,[].concat((0,n.Z)((0,i.Lk)(t,e.outFields)),(0,n.Z)(r))):(0,i.Q0)(t,r)}}}}},17006:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(74165),i=r(15861),a=r(15671),u=r(43144),o=r(60136),s=r(29388),l=r(27366),c=r(32718),d=r(92026),f=r(94172),p=r(49861),y=(r(63780),r(93169),r(25243),r(75505),r(39052),r(47492),r(13922),r(79803)),v=r(67581),h=c.Z.getLogger("esri.views.layers.SceneLayerView"),g=function(e){(0,o.Z)(l,e);var t=(0,s.Z)(l);function l(){var e;return(0,a.Z)(this,l),(e=t.apply(this,arguments)).layer=null,e.filter=null,e._geometryEngine=null,e._projectionEngineLoaded=!1,e}return(0,u.Z)(l,[{key:"availableFields",get:function(){return[]}},{key:"maximumNumberOfFeatures",get:function(){return 0},set:function(e){throw new Error("Not implemented")}},{key:"maximumNumberOfFeaturesExceeded",get:function(){return!1}},{key:"layerFilter",get:function(){var e=this.layer.filter;if((0,d.Wi)(e)||e.geometries.length<1)return null;var t=this._geometryEngine;if((0,d.Wi)(t)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return null;try{for(var r=t.simplify(e.geometries.getItemAt(0)),n=r.spatialReference,i=1;i<e.geometries.length;i++){var a=t.simplify(e.geometries.getItemAt(i));a.spatialReference.equals(n)||(a=(0,y.iV)(a,n)),r=t.union(r,a)}return{spatialRelationship:e.spatialRelationship,geometry:r}}catch(u){return h.warnOncePerTick("Failed to merge scene filter geometries. Layer mask will be ignored."),null}}},{key:"_filterNeedsProjectionEngine",get:function(){var e=this.layer.filter;if((0,d.Wi)(e)||e.geometries.length<=1)return!1;var t=e.geometries.getItemAt(0).spatialReference;return e.geometries.some((function(e){var r=e.spatialReference;return!r.equals(t)&&!(0,y.Up)(r,t)}))}},{key:"layerFilterUpdating",get:function(){return(0,d.pC)(this.layer.filter)&&this.layer.filter.geometries.length&&(!this._geometryEngine||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)}},{key:"initialize",value:function(){var e=this;(0,f.N1)((function(){return!e._geometryEngine&&(0,d.pC)(e.layer.filter)&&e.layer.filter.geometries.length})).then((0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.bind(r,2170));case 2:return t.abrupt("return",e._geometryEngine=t.sent);case 3:case"end":return t.stop()}}),t)})))),this._projectionEngineLoaded=(0,y.kR)(),(0,f.N1)((function(){return!e._projectionEngineLoaded&&e._filterNeedsProjectionEngine})).then((0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.zD)();case 2:e._projectionEngineLoaded=!0;case 3:case"end":return t.stop()}}),t)}))))}},{key:"highlight",value:function(e){throw new Error("Not implemented")}},{key:"queryFeatures",value:function(e,t){throw new Error("Not implemented")}},{key:"queryObjectIds",value:function(e,t){throw new Error("Not implemented")}},{key:"queryFeatureCount",value:function(e,t){throw new Error("Not implemented")}},{key:"createQuery",value:function(){throw new Error("Not implemented")}},{key:"queryExtent",value:function(e,t){throw new Error("Not implemented")}}]),l}(v.Z);(0,l._)([(0,p.Cb)()],g.prototype,"layer",void 0),(0,l._)([(0,p.Cb)()],g.prototype,"availableFields",null),(0,l._)([(0,p.Cb)()],g.prototype,"maximumNumberOfFeatures",null),(0,l._)([(0,p.Cb)({readOnly:!0})],g.prototype,"maximumNumberOfFeaturesExceeded",null),(0,l._)([(0,p.Cb)()],g.prototype,"filter",void 0),(0,l._)([(0,p.Cb)({readOnly:!0})],g.prototype,"layerFilter",null),(0,l._)([(0,p.Cb)()],g.prototype,"_geometryEngine",void 0),(0,l._)([(0,p.Cb)()],g.prototype,"_projectionEngineLoaded",void 0),(0,l._)([(0,p.Cb)()],g.prototype,"_filterNeedsProjectionEngine",null),(0,l._)([(0,p.Cb)()],g.prototype,"layerFilterUpdating",null)}}]);
//# sourceMappingURL=7225.49938dd7.chunk.js.map