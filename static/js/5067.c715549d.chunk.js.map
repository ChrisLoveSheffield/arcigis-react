{"version":3,"file":"static/js/5067.c715549d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{WGLDrawPhase as r}from\"./enums.js\";import s from\"./WGLContainer.js\";import t from\"./brushes/WGLBrushInfo.js\";import n from\"./brushes/WGLBrushStencil.js\";const i=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class o extends s{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(i),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const i=super.prepareRenderPasses(s);return i.push(s.registerRenderPass({name:\"stencil\",brushes:[n],drawPhase:r.DEBUG|r.MAP|r.HIGHLIGHT,target:()=>this.getStencilTarget()})),e(\"esri-tiles-debug\")&&i.push(s.registerRenderPass({name:\"tileInfo\",brushes:[t],drawPhase:r.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../core/Logger.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{e as o}from\"../../../../chunks/earcut.js\";import{a as s}from\"../../../../chunks/vec2.js\";import{a as n}from\"../../../../chunks/vec2f64.js\";import{convertFromNestedArray as i,convertFromPolygon as c}from\"../../../../layers/graphics/featureConversionUtils.js\";import a from\"../../../../layers/graphics/OptimizedGeometry.js\";import{i1616to32 as f}from\"./number.js\";import{BufferObject as h}from\"../../../webgl/BufferObject.js\";import{PrimitiveType as m,Usage as u,DataType as y}from\"../../../webgl/enums.js\";const x=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),g=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return y.UNSIGNED_BYTE;case 2:return y.UNSIGNED_SHORT;case 4:return y.UNSIGNED_INT;default:throw new e(\"Cannot get DataType of array\")}},p=(e,t,r,o)=>{let s=0;for(let n=1;n<r;n++){const r=e[2*(t+n-1)],o=e[2*(t+n-1)+1];s+=(e[2*(t+n)]-r)*(e[2*(t+n)+1]+o)}return o?s>0:s<0},l=({coords:e,lengths:t},r)=>{const s=[];for(let n=0,i=0;n<t.length;i+=t[n],n+=1){const c=i,a=[];for(;n<t.length-1&&p(e,i+t[n],t[n+1],r);n+=1,i+=t[n])a.push(i+t[n]-c);const f=e.slice(2*c,2*(i+t[n])),h=o(f,a,2);for(const e of h)s.push(e+c)}return s};class w{constructor(e,t,r,o=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=o}static fromRect({x:e,y:t,width:r,height:o}){const s=e,n=t,i=s+r,c=n+o;return w.fromScreenExtent({xmin:s,ymin:n,xmax:i,ymax:c})}static fromPath(e){const t=i(new a,e.path,!1,!1),r=t.coords,o=new Uint32Array(l(t,!0)),s=new Uint32Array(r.length/2);for(let n=0;n<s.length;n++)s[n]=f(Math.floor(r[2*n]),Math.floor(r[2*n+1]));return new w({geometry:s},o,m.TRIANGLES)}static fromGeometry(t,r){const o=r.geometry.type;switch(o){case\"polygon\":return w.fromPolygon(t,r.geometry);case\"extent\":return w.fromMapExtent(t,r.geometry);default:return x.error(new e(\"mapview-bad-type\",`Unable to create a mesh from type ${o}`,r)),w.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=c(new a,t,!1,!1),o=r.coords,i=new Uint32Array(l(r,!1)),h=new Uint32Array(o.length/2),u=n(),y=n();for(let n=0;n<h.length;n++)s(u,o[2*n],o[2*n+1]),e.toScreen(y,u),h[n]=f(Math.floor(y[0]),Math.floor(y[1]));return new w({geometry:h},i,m.TRIANGLES,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:o}){const s={geometry:new Uint32Array([f(e,r),f(t,r),f(e,o),f(e,o),f(t,r),f(t,o)])},n=new Uint32Array([0,1,2,3,4,5]);return new w(s,n,m.TRIANGLES)}static fromMapExtent(e,t){const[r,o]=e.toScreen([0,0],[t.xmin,t.ymin]),[s,n]=e.toScreen([0,0],[t.xmax,t.ymax]),i={geometry:new Uint32Array([f(r,o),f(s,o),f(r,n),f(r,n),f(s,o),f(s,n)])},c=new Uint32Array([0,1,2,3,4,5]);return new w(i,c,m.TRIANGLES)}destroy(){r(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)r(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return g(this.indices)}getIndexBuffer(e,t=u.STATIC_DRAW){return this._cache.indexBuffer||(this._cache.indexBuffer=h.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=u.STATIC_DRAW){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,o)=>({...r,[o]:h.createVertex(e,t,this.vertices[o])})),{})),this._cache.vertexBuffers}}export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{watch as i}from\"../../../../core/reactiveUtils.js\";import{c as o}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as h}from\"../DisplayObject.js\";import a from\"./Mesh2D.js\";import{VertexArrayObject as c}from\"../../../webgl/VertexArrayObject.js\";const n=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),m=t=>parseFloat(t)/100;class p extends h{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=i((()=>e.version),(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new p(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new c(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:o()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?m(e.left)*r:e.left,o=\"string\"==typeof e.right?m(e.right)*r:e.right,h=\"string\"==typeof e.top?m(e.top)*s:e.top,a=\"string\"==typeof e.bottom?m(e.bottom)*s:e.bottom,c=i,n=h;return{x:c,y:n,width:Math.max(r-o-c,0),height:Math.max(s-a-n,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return a.fromRect(this._createScreenRect(e,r));case\"path\":return a.fromPath(r);case\"geometry\":return a.fromGeometry(e,r);default:return n.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),a.fromRect({x:0,y:0,width:1,height:1})}}}export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL||n===o.HIGHLIGHT?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n"],"names":["i","e","r","key","level","row","col","o","_tileInfoView","this","sortChildren","setStencilReference","state","s","requiredLevel","getClosestInfoForScale","scale","displayLevel","tileInfo","scaleToZoom","push","registerRenderPass","name","brushes","n","drawPhase","target","getStencilTarget","t","children","getTileResolution","setTransform","stencilRef","x","p","l","coords","lengths","length","c","a","f","slice","h","w","_cache","vertices","indices","primitiveType","isMapSpace","indexBuffer","dispose","vertexBuffers","BYTES_PER_ELEMENT","y","g","u","Object","keys","reduce","width","height","fromScreenExtent","xmin","ymin","xmax","ymax","path","Uint32Array","Math","floor","geometry","m","type","fromPolygon","fromMapExtent","error","fromRect","toScreen","parseFloat","_clip","stage","_handle","version","_invalidate","ready","mesh","destroy","vao","_destroyGL","remove","size","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","dvs","requestRender","left","right","top","bottom","max","_createScreenRect","arguments","constructor","_clips","forEach","clips","_updateClippingInfo","createRenderParams","painter","globalOpacity","profiler","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","renderChildren","compositeLayer","recordContainerEnd","_renderPasses","prepareRenderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","items","map"],"sourceRoot":""}